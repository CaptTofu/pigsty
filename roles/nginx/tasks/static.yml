---
#------------------------------------------------------------------------------
# setup pigsty local docs (/www/docs -> http://pigsty/docs)
#------------------------------------------------------------------------------
- name: Setup docs if exists
  tags: nginx_doc
  ignore_errors: true     # skip if pev2 not available on repo
  shell: |
    # /www/pigsty/docs.tgz is the default path
    DOCS_TARBALL="{{ nginx_home }}/{{ repo_name }}/docs.tgz"
    
    # skip if docs packages not available
    if [[ ! -f ${DOCS_TARBALL} ]]; then
        exit 0;
    fi
    
    rm -rf /{{ nginx_home }}/docs
    tar -xf ${DOCS_TARBALL} -C {{ nginx_home }}

#------------------------------------------------------------------------------
# setup pev2 explain visualizer
#------------------------------------------------------------------------------
# TODO: obsolete: pev2 is now a standalone index.html
- name: Setup pev2 if exists
  tags: nginx_pev2
  ignore_errors: true     # skip if pev2 not available on repo
  shell: |
    cp -f {{ nginx_home }}/{{ repo_name }}/index.html {{ nginx_home }}/pev.html || /bin/true;

...