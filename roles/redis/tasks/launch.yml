#------------------------------------------------------------------------------
# launch
#------------------------------------------------------------------------------
- debug:
    msg: "launch redis-server {{ redis_cluster }}-{{ seq }}@{{ ip }}:{{ port }}"

- name: Launch redis-server systemd service
  tags: redis_launch
  systemd:
    name: redis-server@{{ port }}.service
    state: restarted
    enabled: yes
    daemon_reload: yes

- name: Wait for redis-server port online
  tags: redis_launch
  wait_for: host=127.0.0.1 port={{ port }} state=started timeout=60

