---
#--------------------------------------------------------------#
# Register PostgreSQL Cluster/Instance to Infrastructure
#--------------------------------------------------------------#

#--------------------------------------------------------------#
# consul registry
#--------------------------------------------------------------#
- import_tasks: consul-service.yml
  tags: register_consul
  when: service_registry == 'consul'

#--------------------------------------------------------------#
# etcd registry
#--------------------------------------------------------------#
# TODO ETCD Register


#--------------------------------------------------------------#
# prometheus static-file-sd monitoring targets
#--------------------------------------------------------------#
- import_tasks: prometheus-target.yml
  tags: register_prometheus


#--------------------------------------------------------------#
# grafana postgres data source
#--------------------------------------------------------------#
- import_tasks: grafana-datasource.yml
  tags: register_grafana


#--------------------------------------------------------------#
# nginx haproxy admin page
#--------------------------------------------------------------#
- import_tasks: nginx-haproxy.yml
  tags: register_nginx

#--------------------------------------------------------------#
# cmdb records
#--------------------------------------------------------------#
# TODO: CMDB Register

...