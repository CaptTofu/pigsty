---
#--------------------------------------------------------------#
# register exporter targets to prometheus  [register_prometheus]
#--------------------------------------------------------------#
# pgsql_register
- import_tasks: prometheus.yml
  tags: register_prometheus

#--------------------------------------------------------------#
# print summary                                     [pg_summary]
#--------------------------------------------------------------#
- name: print pgsql identity
  tags: pg_summary
  connection: local
  debug:
    msg: >-
      PGSQL INITED: [{{ pg_role }}] {{ pg_instance }} @ {{ inventory_hostname }}
        PGURL=postgres://{{ inventory_hostname }}:{{ pg_port }}/postgres
        {% if pg_databases is defined and pg_databases|length > 0%}Databases: {% for db in pg_databases %} {{ db.name }}{% endfor %}{% endif %}

...