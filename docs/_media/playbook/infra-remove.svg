<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 3.0.0 (20220226.1711)
 --><!-- Pages: 1 --><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="2020pt" height="2146pt" viewBox="0.00 0.00 2020.06 2146.04" id="svg">
<script type="text/javascript" href="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js" id="jquery"/><script type="text/javascript" id="my_javascript"><![CDATA[/**
 * This file contains the functions responsible to highlight the plays, roles and tasks when rendering the SVG file in a browser
 * or any SVG reader that support Javascript.
 */

/**
 * The name of the CSS class for highlighted elements
 * @type {string}
 */
const HIGHLIGHT_CLASS = "highlight";

/**
 * The current selected element on the graph
 * @type {null}
 */
let currentSelectedElement = null;

/**
 * Highlight the linked nodes of the given root element
 * @param rootElement
 */
function highlightLinkedNodes(rootElement) {
    $(rootElement).find('link').each(function (index, element) {
        let target = $(element).attr('target');
        let currentElement = $('#' + target);
        currentElement.addClass(HIGHLIGHT_CLASS);

        // Recursively highlight
        highlightLinkedNodes(currentElement);
    })
}


/**
 * Unhighlight the linked nodes of the given root element
 * @param {Element} rootElement
 * @param {boolean} isHover True when we are coming from a mouseleave event. In that case, we should not unhighlight if
 * the rootElement is the current selected element
 */
function unHighlightLinkedNodes(rootElement, isHover) {
    const currentSelectedElementId = $(currentSelectedElement).attr('id');

    // Do not unhighlight the current current selected element
    if ($(rootElement).attr('id') !== currentSelectedElementId || !isHover) {

        $(rootElement).find('link').each(function (index, element) {
            let linkedElementId = $(element).attr('target');
            let linkedElement = $('#' + linkedElementId);

            if (linkedElement.attr("id") !== currentSelectedElementId) {
                linkedElement.removeClass(HIGHLIGHT_CLASS);
                // Recursively unhighlight
                unHighlightLinkedNodes(linkedElement, isHover);
            }
            
        })
    }

}

/**
 * Hover handler for mouseenter event
 * @param event
 */
function hoverMouseEnter(event) {
    highlightLinkedNodes(event.currentTarget);
}

/**
 * Hover handler for mouseleave event
 * @param event
 */
function hoverMouseLeave(event) {
    unHighlightLinkedNodes(event.currentTarget, true);
}

/**
 * Handler when clicking on some elements
 * @param event
 */
function clickOnElement(event) {
    let newClickedElement = $(event.currentTarget);

    if (newClickedElement.attr('id') === $(currentSelectedElement).attr('id')) { // clicking again on the same element
        newClickedElement.removeClass(HIGHLIGHT_CLASS);
        unHighlightLinkedNodes(currentSelectedElement, false);
        currentSelectedElement = null;
    } else { // clicking on a different node

        // Remove highlight from all the nodes linked the current selected node
        unHighlightLinkedNodes(currentSelectedElement, false);

        newClickedElement.addClass(HIGHLIGHT_CLASS);
        highlightLinkedNodes(newClickedElement);
        currentSelectedElement = newClickedElement;
    }
}


$("#svg").ready(function () {
    let plays = $("g[id^=play_]");
    let roles = $("g[id^=role_]");
    let blocks = $("g[id^=block_]");

    // Set hover and click events on the plays
    plays.hover(hoverMouseEnter, hoverMouseLeave);
    plays.click(clickOnElement);

    // Set hover and click events on the roles
    roles.hover(hoverMouseEnter, hoverMouseLeave);
    roles.click(clickOnElement);

    // Set hover and click events on the blocks
    blocks.hover(hoverMouseEnter, hoverMouseLeave);
    blocks.click(clickOnElement);

});
]]></script><style type="text/css" id="my_css"><![CDATA[/**
 Hover on nodes, edges, path and polygon
 */
.node:hover, .edge:hover, path:hover, path + polygon:hover {
    cursor: pointer;
    stroke-width: 3;
    font-weight: bolder;
}

/**
 Manually added class by the script highlight-hover.js when hovering on plays and roles
 */
.highlight {
    cursor: pointer;
    stroke-width: 3;
    font-weight: bolder;
}
]]></style><g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2142.04)">
<polygon fill="white" stroke="transparent" points="-4,4 -4,-2142.04 2016.06,-2142.04 2016.06,4 -4,4"/>
<!-- infra&#45;remove.yml -->
<g id="root_node" class="node">
<title>infra-remove.yml</title>
<ellipse fill="none" stroke="black" stroke-dasharray="1,5" cx="73.44" cy="-1004.04" rx="73.39" ry="18"/>
<text text-anchor="middle" x="73.44" y="-1000.34" font-family="Times,serif" font-size="14.00">infra-remove.yml</text>
</g>
<!-- play_04fb9b81 -->
<g id="play_04fb9b81" class="node">
<title>play_04fb9b81</title>
<g id="a_play_04fb9b81"><a xlink:title="10.10.10.10">
<polygon fill="#9f2d42" stroke="#9f2d42" points="352.89,-1058.04 193.89,-1058.04 193.89,-1022.04 352.89,-1022.04 352.89,-1058.04"/>
<text text-anchor="middle" x="273.39" y="-1036.34" font-family="Times,serif" font-size="14.00" fill="#ffffff">Play: PGSQL Remove (1)</text>
</a>
</g>
<links><link target="edge_8e7e7636"/></links></g>
<!-- infra&#45;remove.yml&#45;&gt;play_04fb9b81 -->
<g id="edge_15107c53" class="edge">
<title>infra-remove.yml-&gt;play_04fb9b81</title>
<g id="a_edge_15107c53"><a xlink:title="1 ">
<path fill="none" stroke="#9f2d42" d="M133.03,-1014.69C148.94,-1017.59 166.54,-1020.79 183.72,-1023.91" id="path_edge_15107c53"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="183.3,-1027.39 193.77,-1025.74 184.56,-1020.51 183.3,-1027.39"/>
</a>
</g>
<g id="a_edge_15107c53-label"><a xlink:title="1 ">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_15107c53" text-anchor="middle" startOffset="50%">1 </textPath></text>
</a>
</g>
<links><link target="play_04fb9b81"/></links></g>
<!-- play_7e69963a -->
<g id="play_7e69963a" class="node">
<title>play_7e69963a</title>
<g id="a_play_7e69963a"><a xlink:title="10.10.10.10">
<polygon fill="#1809c3" stroke="#1809c3" points="344.89,-995.04 201.89,-995.04 201.89,-959.04 344.89,-959.04 344.89,-995.04"/>
<text text-anchor="middle" x="273.39" y="-973.34" font-family="Times,serif" font-size="14.00" fill="#ffffff">Play: Infra Remove (1)</text>
</a>
</g>
<links><link target="edge_852d7cbf"/><link target="edge_237400b6"/><link target="edge_cd4f7fd7"/></links></g>
<!-- infra&#45;remove.yml&#45;&gt;play_7e69963a -->
<g id="edge_2aba1c0b" class="edge">
<title>infra-remove.yml-&gt;play_7e69963a</title>
<g id="a_edge_2aba1c0b"><a xlink:title="2 ">
<path fill="none" stroke="#1809c3" d="M135.7,-994.27C145.46,-992.8 155.44,-991.34 164.89,-990.04 173.55,-988.84 182.61,-987.65 191.64,-986.51" id="path_edge_2aba1c0b"/>
<polygon fill="#1809c3" stroke="#1809c3" points="192.31,-989.95 201.8,-985.23 191.44,-983.01 192.31,-989.95"/>
</a>
</g>
<g id="a_edge_2aba1c0b-label"><a xlink:title="2 ">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#1809c3" dy="-1%"><textPath xlink:href="#path_edge_2aba1c0b" text-anchor="middle" startOffset="50%">2 </textPath></text>
</a>
</g>
<links><link target="play_7e69963a"/></links></g>
<!-- role_5bbec4da -->
<g id="role_5bbec4da" class="node">
<title>role_5bbec4da</title>
<g id="a_role_5bbec4da"><a xlink:title="pg_remove">
<ellipse fill="none" stroke="#9f2d42" cx="731.5" cy="-1066.04" rx="72.59" ry="18"/>
<text text-anchor="middle" x="731.5" y="-1062.34" font-family="Times,serif" font-size="14.00">[role] pg_remove</text>
</a>
</g>
<links><link target="edge_d761f26a"/><link target="edge_6c6ea5b3"/><link target="edge_f4282b43"/><link target="edge_23808c10"/><link target="edge_76286ab6"/><link target="edge_639babe2"/><link target="edge_c40f5159"/><link target="edge_1efb31c3"/><link target="edge_f8730ed4"/><link target="edge_1c5e3311"/><link target="edge_b997353a"/><link target="edge_1ef67ac5"/><link target="edge_2a8e829d"/><link target="edge_eebf64e5"/><link target="edge_766350f3"/><link target="edge_8fa8582c"/><link target="edge_920ddfa6"/><link target="edge_451ed3e4"/><link target="edge_0ae71e47"/><link target="edge_258cab48"/><link target="edge_00061482"/><link target="edge_41396be8"/><link target="edge_c6dc6787"/><link target="edge_be887cbd"/><link target="edge_e714defd"/><link target="edge_4b5e4738"/><link target="edge_883c20e1"/><link target="edge_da182343"/><link target="edge_7c1b7cbb"/><link target="edge_6e5b08b4"/><link target="edge_5290e658"/><link target="edge_b7db64e1"/><link target="edge_3082e953"/><link target="edge_6803d987"/><link target="edge_3197b705"/><link target="edge_7c60a9e9"/><link target="edge_33c97c23"/><link target="edge_649f483c"/><link target="edge_b14783e3"/></links></g>
<!-- play_04fb9b81&#45;&gt;role_5bbec4da -->
<g id="edge_8e7e7636" class="edge">
<title>play_04fb9b81-&gt;role_5bbec4da</title>
<g id="a_edge_8e7e7636"><a xlink:title="1 ">
<path fill="none" stroke="#9f2d42" d="M353.05,-1044.52C436.11,-1049.26 566.36,-1056.68 650.07,-1061.45" id="path_edge_8e7e7636"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="650.12,-1064.96 660.3,-1062.04 650.51,-1057.97 650.12,-1064.96"/>
</a>
</g>
<g id="a_edge_8e7e7636-label"><a xlink:title="1 ">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_8e7e7636" text-anchor="middle" startOffset="50%">1 </textPath></text>
</a>
</g>
<links><link target="role_5bbec4da"/></links></g>
<!-- task_92e09d1c -->
<g id="task_92e09d1c" class="node">
<title>task_92e09d1c</title>
<g id="a_task_92e09d1c"><a xlink:title="pg_remove : Remove pgsql target from prometheus">
<polygon fill="none" stroke="#9f2d42" points="1947.09,-2084.58 1947.09,-2099.49 1823.19,-2110.04 1647.98,-2110.04 1524.08,-2099.49 1524.08,-2084.58 1647.98,-2074.04 1823.19,-2074.04 1947.09,-2084.58"/>
<text text-anchor="middle" x="1735.58" y="-2088.34" font-family="Times,serif" font-size="14.00">pg_remove : Remove pgsql target from prometheus</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_92e09d1c -->
<g id="edge_d761f26a" class="edge">
<title>role_5bbec4da-&gt;task_92e09d1c</title>
<g id="a_edge_d761f26a"><a xlink:title="1 [when: pg_clean|bool]">
<path fill="none" stroke="#9f2d42" d="M733.22,-1084.29C738.52,-1208.59 775.84,-1929.44 933.11,-2063.04 1028.99,-2144.48 1388.83,-2125.4 1592.23,-2107.13" id="path_edge_d761f26a"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1592.76,-2110.59 1602.4,-2106.2 1592.12,-2103.62 1592.76,-2110.59"/>
</a>
</g>
<g id="a_edge_d761f26a-label"><a xlink:title="1 [when: pg_clean|bool]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_d761f26a" text-anchor="middle" startOffset="50%">1 [when: pg_clean|bool]</textPath></text>
</a>
</g>
<links><link target="task_92e09d1c"/></links></g>
<!-- task_e7e1af67 -->
<g id="task_e7e1af67" class="node">
<title>task_e7e1af67</title>
<g id="a_task_e7e1af67"><a xlink:title="pg_remove : Remove grafana datasource on meta node">
<polygon fill="none" stroke="#9f2d42" points="1959.91,-2030.58 1959.91,-2045.49 1828.5,-2056.04 1642.66,-2056.04 1511.25,-2045.49 1511.25,-2030.58 1642.66,-2020.04 1828.5,-2020.04 1959.91,-2030.58"/>
<text text-anchor="middle" x="1735.58" y="-2034.34" font-family="Times,serif" font-size="14.00">pg_remove : Remove grafana datasource on meta node</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_e7e1af67 -->
<g id="edge_6c6ea5b3" class="edge">
<title>role_5bbec4da-&gt;task_e7e1af67</title>
<g id="a_edge_6c6ea5b3"><a xlink:title="2 [when: pg_clean|bool]">
<path fill="none" stroke="#9f2d42" d="M733.43,-1084.08C740,-1203.88 783.64,-1883.48 933.11,-2009.04 975.88,-2044.97 1279.95,-2047.25 1500.93,-2043.94" id="path_edge_6c6ea5b3"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1501.11,-2047.44 1511.06,-2043.79 1501.01,-2040.44 1501.11,-2047.44"/>
</a>
</g>
<g id="a_edge_6c6ea5b3-label"><a xlink:title="2 [when: pg_clean|bool]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_6c6ea5b3" text-anchor="middle" startOffset="50%">2 [when: pg_clean|bool]</textPath></text>
</a>
</g>
<links><link target="task_e7e1af67"/></links></g>
<!-- task_d082b3f7 -->
<g id="task_d082b3f7" class="node">
<title>task_d082b3f7</title>
<g id="a_task_d082b3f7"><a xlink:title="pg_remove : Remove haproxy upstream from nginx">
<polygon fill="none" stroke="#9f2d42" points="1947.99,-1976.58 1947.99,-1991.49 1823.57,-2002.04 1647.6,-2002.04 1523.17,-1991.49 1523.17,-1976.58 1647.6,-1966.04 1823.57,-1966.04 1947.99,-1976.58"/>
<text text-anchor="middle" x="1735.58" y="-1980.34" font-family="Times,serif" font-size="14.00">pg_remove : Remove haproxy upstream from nginx</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_d082b3f7 -->
<g id="edge_f4282b43" class="edge">
<title>role_5bbec4da-&gt;task_d082b3f7</title>
<g id="a_edge_f4282b43"><a xlink:title="3 [when: pg_clean|bool]">
<path fill="none" stroke="#9f2d42" d="M733.68,-1084.17C741.65,-1200.2 791.55,-1837.6 933.11,-1955.04 976.88,-1991.34 1291.16,-1993.12 1512.89,-1989.66" id="path_edge_f4282b43"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1513.1,-1993.15 1523.04,-1989.49 1512.99,-1986.15 1513.1,-1993.15"/>
</a>
</g>
<g id="a_edge_f4282b43-label"><a xlink:title="3 [when: pg_clean|bool]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_f4282b43" text-anchor="middle" startOffset="50%">3 [when: pg_clean|bool]</textPath></text>
</a>
</g>
<links><link target="task_d082b3f7"/></links></g>
<!-- task_b52c084b -->
<g id="task_b52c084b" class="node">
<title>task_b52c084b</title>
<g id="a_task_b52c084b"><a xlink:title="pg_remove : Remove haproxy url location from nginx">
<polygon fill="none" stroke="#9f2d42" points="1956.38,-1922.58 1956.38,-1937.49 1827.04,-1948.04 1644.13,-1948.04 1514.79,-1937.49 1514.79,-1922.58 1644.13,-1912.04 1827.04,-1912.04 1956.38,-1922.58"/>
<text text-anchor="middle" x="1735.58" y="-1926.34" font-family="Times,serif" font-size="14.00">pg_remove : Remove haproxy url location from nginx</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_b52c084b -->
<g id="edge_23808c10" class="edge">
<title>role_5bbec4da-&gt;task_b52c084b</title>
<g id="a_edge_23808c10"><a xlink:title="4 [when: pg_clean|bool]">
<path fill="none" stroke="#9f2d42" d="M733.96,-1084.13C743.41,-1195.85 799.59,-1790.72 933.11,-1900.04 976.55,-1935.6 1283.33,-1938.26 1504.42,-1935.36" id="path_edge_23808c10"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1504.6,-1938.86 1514.55,-1935.23 1504.5,-1931.86 1504.6,-1938.86"/>
</a>
</g>
<g id="a_edge_23808c10-label"><a xlink:title="4 [when: pg_clean|bool]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_23808c10" text-anchor="middle" startOffset="50%">4 [when: pg_clean|bool]</textPath></text>
</a>
</g>
<links><link target="task_b52c084b"/></links></g>
<!-- task_9325ae9e -->
<g id="task_9325ae9e" class="node">
<title>task_9325ae9e</title>
<g id="a_task_9325ae9e"><a xlink:title="pg_remove : Reload nginx to remove haproxy upstream">
<polygon fill="none" stroke="#9f2d42" points="1963.04,-1868.58 1963.04,-1883.49 1829.8,-1894.04 1641.37,-1894.04 1508.13,-1883.49 1508.13,-1868.58 1641.37,-1858.04 1829.8,-1858.04 1963.04,-1868.58"/>
<text text-anchor="middle" x="1735.58" y="-1872.34" font-family="Times,serif" font-size="14.00">pg_remove : Reload nginx to remove haproxy upstream</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_9325ae9e -->
<g id="edge_76286ab6" class="edge">
<title>role_5bbec4da-&gt;task_9325ae9e</title>
<g id="a_edge_76286ab6"><a xlink:title="5 [when: pg_clean|bool]">
<path fill="none" stroke="#9f2d42" d="M734.3,-1084.35C745.34,-1192.35 807.49,-1744.82 933.11,-1846.04 976.41,-1880.92 1277.7,-1883.95 1498.18,-1881.3" id="path_edge_76286ab6"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1498.33,-1884.8 1508.29,-1881.17 1498.25,-1877.8 1498.33,-1884.8"/>
</a>
</g>
<g id="a_edge_76286ab6-label"><a xlink:title="5 [when: pg_clean|bool]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_76286ab6" text-anchor="middle" startOffset="50%">5 [when: pg_clean|bool]</textPath></text>
</a>
</g>
<links><link target="task_9325ae9e"/></links></g>
<!-- task_3579af67 -->
<g id="task_3579af67" class="node">
<title>task_3579af67</title>
<g id="a_task_3579af67"><a xlink:title="pg_remove : Remove cluster service from consul">
<polygon fill="none" stroke="#9f2d42" points="1937.39,-1814.58 1937.39,-1829.49 1819.17,-1840.04 1651.99,-1840.04 1533.78,-1829.49 1533.78,-1814.58 1651.99,-1804.04 1819.17,-1804.04 1937.39,-1814.58"/>
<text text-anchor="middle" x="1735.58" y="-1818.34" font-family="Times,serif" font-size="14.00">pg_remove : Remove cluster service from consul</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_3579af67 -->
<g id="edge_639babe2" class="edge">
<title>role_5bbec4da-&gt;task_3579af67</title>
<g id="a_edge_639babe2"><a xlink:title="6 [when: pg_clean|bool and dcs_registry == 'consul']">
<path fill="none" stroke="#9f2d42" d="M734.64,-1084.09C747.22,-1187.07 815.17,-1698.73 933.11,-1792.04 978.38,-1827.85 1301.29,-1829.86 1523.16,-1826.82" id="path_edge_639babe2"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1523.37,-1830.32 1533.32,-1826.68 1523.27,-1823.32 1523.37,-1830.32"/>
</a>
</g>
<g id="a_edge_639babe2-label"><a xlink:title="6 [when: pg_clean|bool and dcs_registry == 'consul']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_639babe2" text-anchor="middle" startOffset="50%">6 [when: pg_clean|bool and dcs_registry == 'consul']</textPath></text>
</a>
</g>
<links><link target="task_3579af67"/></links></g>
<!-- task_0b06b8c7 -->
<g id="task_0b06b8c7" class="node">
<title>task_0b06b8c7</title>
<g id="a_task_0b06b8c7"><a xlink:title="pg_remove : Remove haproxy service from consul">
<polygon fill="none" stroke="#9f2d42" points="1943.14,-1760.58 1943.14,-1775.49 1821.56,-1786.04 1649.61,-1786.04 1528.02,-1775.49 1528.02,-1760.58 1649.61,-1750.04 1821.56,-1750.04 1943.14,-1760.58"/>
<text text-anchor="middle" x="1735.58" y="-1764.34" font-family="Times,serif" font-size="14.00">pg_remove : Remove haproxy service from consul</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_0b06b8c7 -->
<g id="edge_c40f5159" class="edge">
<title>role_5bbec4da-&gt;task_0b06b8c7</title>
<g id="a_edge_c40f5159"><a xlink:title="7 [when: pg_clean|bool and dcs_registry == 'consul']">
<path fill="none" stroke="#9f2d42" d="M735.1,-1084.33C749.54,-1183.14 823.2,-1651.83 933.11,-1737.04 978.36,-1772.12 1296.29,-1774.92 1517.84,-1772.44" id="path_edge_c40f5159"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1518.03,-1775.93 1527.99,-1772.32 1517.95,-1768.93 1518.03,-1775.93"/>
</a>
</g>
<g id="a_edge_c40f5159-label"><a xlink:title="7 [when: pg_clean|bool and dcs_registry == 'consul']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_c40f5159" text-anchor="middle" startOffset="50%">7 [when: pg_clean|bool and dcs_registry == 'consul']</textPath></text>
</a>
</g>
<links><link target="task_0b06b8c7"/></links></g>
<!-- task_693f608c -->
<g id="task_693f608c" class="node">
<title>task_693f608c</title>
<g id="a_task_693f608c"><a xlink:title="pg_remove : Reload consul to dereigster haproxy">
<polygon fill="none" stroke="#9f2d42" points="1936.98,-1706.58 1936.98,-1721.49 1819,-1732.04 1652.16,-1732.04 1534.18,-1721.49 1534.18,-1706.58 1652.16,-1696.04 1819,-1696.04 1936.98,-1706.58"/>
<text text-anchor="middle" x="1735.58" y="-1710.34" font-family="Times,serif" font-size="14.00">pg_remove : Reload consul to dereigster haproxy</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_693f608c -->
<g id="edge_1efb31c3" class="edge">
<title>role_5bbec4da-&gt;task_693f608c</title>
<g id="a_edge_1efb31c3"><a xlink:title="8 [when: pg_clean|bool and dcs_registry == 'consul']">
<path fill="none" stroke="#9f2d42" d="M735.55,-1084.09C751.75,-1177.62 830.81,-1605.66 933.11,-1683.04 979.19,-1717.89 1302.32,-1720.58 1523.94,-1718.16" id="path_edge_1efb31c3"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1524.13,-1721.66 1534.09,-1718.05 1524.05,-1714.66 1524.13,-1721.66"/>
</a>
</g>
<g id="a_edge_1efb31c3-label"><a xlink:title="8 [when: pg_clean|bool and dcs_registry == 'consul']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_1efb31c3" text-anchor="middle" startOffset="50%">8 [when: pg_clean|bool and dcs_registry == 'consul']</textPath></text>
</a>
</g>
<links><link target="task_693f608c"/></links></g>
<!-- task_01ee3f9b -->
<g id="task_01ee3f9b" class="node">
<title>task_01ee3f9b</title>
<g id="a_task_01ee3f9b"><a xlink:title="pg_remove : Stop and disable haproxy load balancer">
<polygon fill="none" stroke="#9f2d42" points="1949.31,-1652.58 1949.31,-1667.49 1824.11,-1678.04 1647.06,-1678.04 1521.86,-1667.49 1521.86,-1652.58 1647.06,-1642.04 1824.11,-1642.04 1949.31,-1652.58"/>
<text text-anchor="middle" x="1735.58" y="-1656.34" font-family="Times,serif" font-size="14.00">pg_remove : Stop and disable haproxy load balancer</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_01ee3f9b -->
<g id="edge_f8730ed4" class="edge">
<title>role_5bbec4da-&gt;task_01ee3f9b</title>
<g id="a_edge_f8730ed4"><a xlink:title="9 [when: pg_clean|bool]">
<path fill="none" stroke="#9f2d42" d="M732.36,-1084.28C732.83,-1164.85 746.55,-1490.89 933.11,-1628.04 978.8,-1661.62 1290.76,-1665.42 1511.69,-1663.75" id="path_edge_f8730ed4"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1511.84,-1667.25 1521.82,-1663.67 1511.79,-1660.25 1511.84,-1667.25"/>
</a>
</g>
<g id="a_edge_f8730ed4-label"><a xlink:title="9 [when: pg_clean|bool]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_f8730ed4" text-anchor="middle" startOffset="50%">9 [when: pg_clean|bool]</textPath></text>
</a>
</g>
<links><link target="task_01ee3f9b"/></links></g>
<!-- task_1a834463 -->
<g id="task_1a834463" class="node">
<title>task_1a834463</title>
<g id="a_task_1a834463"><a xlink:title="pg_remove : Stop and disable vip-manager">
<polygon fill="none" stroke="#9f2d42" points="1912.64,-1598.58 1912.64,-1613.49 1808.92,-1624.04 1662.24,-1624.04 1558.52,-1613.49 1558.52,-1598.58 1662.24,-1588.04 1808.92,-1588.04 1912.64,-1598.58"/>
<text text-anchor="middle" x="1735.58" y="-1602.34" font-family="Times,serif" font-size="14.00">pg_remove : Stop and disable vip-manager</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_1a834463 -->
<g id="edge_1c5e3311" class="edge">
<title>role_5bbec4da-&gt;task_1a834463</title>
<g id="a_edge_1c5e3311"><a xlink:title="10 [when: pg_clean|bool]">
<path fill="none" stroke="#9f2d42" d="M733.11,-1084.05C736.74,-1159.44 761.78,-1451.35 933.11,-1573.04 981.93,-1607.71 1326.87,-1610.69 1548.04,-1608.91" id="path_edge_1c5e3311"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1548.17,-1612.41 1558.14,-1608.83 1548.11,-1605.41 1548.17,-1612.41"/>
</a>
</g>
<g id="a_edge_1c5e3311-label"><a xlink:title="10 [when: pg_clean|bool]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_1c5e3311" text-anchor="middle" startOffset="50%">10 [when: pg_clean|bool]</textPath></text>
</a>
</g>
<links><link target="task_1a834463"/></links></g>
<!-- task_0f272cb7 -->
<g id="task_0f272cb7" class="node">
<title>task_0f272cb7</title>
<g id="a_task_0f272cb7"><a xlink:title="pg_remove : Remove pg_exporter service from consul">
<polygon fill="none" stroke="#9f2d42" points="1957.69,-1544.58 1957.69,-1559.49 1827.58,-1570.04 1643.58,-1570.04 1513.48,-1559.49 1513.48,-1544.58 1643.58,-1534.04 1827.58,-1534.04 1957.69,-1544.58"/>
<text text-anchor="middle" x="1735.58" y="-1548.34" font-family="Times,serif" font-size="14.00">pg_remove : Remove pg_exporter service from consul</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_0f272cb7 -->
<g id="edge_b997353a" class="edge">
<title>role_5bbec4da-&gt;task_0f272cb7</title>
<g id="a_edge_b997353a"><a xlink:title="11 [when: pg_clean|bool and dcs_registry == 'consul']">
<path fill="none" stroke="#9f2d42" d="M734,-1084.08C740.95,-1154.54 776.67,-1412.58 933.11,-1519.04 979.37,-1550.52 1283.43,-1555.48 1503.37,-1554.81" id="path_edge_b997353a"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1503.46,-1558.31 1513.45,-1554.77 1503.44,-1551.31 1503.46,-1558.31"/>
</a>
</g>
<g id="a_edge_b997353a-label"><a xlink:title="11 [when: pg_clean|bool and dcs_registry == 'consul']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_b997353a" text-anchor="middle" startOffset="50%">11 [when: pg_clean|bool and dcs_registry == 'consul']</textPath></text>
</a>
</g>
<links><link target="task_0f272cb7"/></links></g>
<!-- task_95d5af10 -->
<g id="task_95d5af10" class="node">
<title>task_95d5af10</title>
<g id="a_task_95d5af10"><a xlink:title="pg_remove : Reload consul to dereigster pg_exporter">
<polygon fill="none" stroke="#9f2d42" points="1951.53,-1490.58 1951.53,-1505.49 1825.03,-1516.04 1646.14,-1516.04 1519.64,-1505.49 1519.64,-1490.58 1646.14,-1480.04 1825.03,-1480.04 1951.53,-1490.58"/>
<text text-anchor="middle" x="1735.58" y="-1494.34" font-family="Times,serif" font-size="14.00">pg_remove : Reload consul to dereigster pg_exporter</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_95d5af10 -->
<g id="edge_1ef67ac5" class="edge">
<title>role_5bbec4da-&gt;task_95d5af10</title>
<g id="a_edge_1ef67ac5"><a xlink:title="12 [when: pg_clean|bool and dcs_registry == 'consul']">
<path fill="none" stroke="#9f2d42" d="M735.13,-1084.19C745.68,-1149.52 791.41,-1373.61 933.11,-1465.04 980.54,-1495.64 1289.37,-1500.72 1509.47,-1500.32" id="path_edge_1ef67ac5"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1509.56,-1503.82 1519.55,-1500.3 1509.55,-1496.82 1509.56,-1503.82"/>
</a>
</g>
<g id="a_edge_1ef67ac5-label"><a xlink:title="12 [when: pg_clean|bool and dcs_registry == 'consul']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_1ef67ac5" text-anchor="middle" startOffset="50%">12 [when: pg_clean|bool and dcs_registry == 'consul']</textPath></text>
</a>
</g>
<links><link target="task_95d5af10"/></links></g>
<!-- task_8facabf2 -->
<g id="task_8facabf2" class="node">
<title>task_8facabf2</title>
<g id="a_task_8facabf2"><a xlink:title="pg_remove : Stop and disable pg_exporter service">
<polygon fill="none" stroke="#9f2d42" points="1939.61,-1436.58 1939.61,-1451.49 1820.09,-1462.04 1651.07,-1462.04 1531.56,-1451.49 1531.56,-1436.58 1651.07,-1426.04 1820.09,-1426.04 1939.61,-1436.58"/>
<text text-anchor="middle" x="1735.58" y="-1440.34" font-family="Times,serif" font-size="14.00">pg_remove : Stop and disable pg_exporter service</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_8facabf2 -->
<g id="edge_2a8e829d" class="edge">
<title>role_5bbec4da-&gt;task_8facabf2</title>
<g id="a_edge_2a8e829d"><a xlink:title="13 [when: pg_clean|bool]">
<path fill="none" stroke="#9f2d42" d="M736.41,-1084C750.48,-1143.78 804.71,-1336.61 933.11,-1414.04 982.29,-1443.69 1300.89,-1447.58 1521.27,-1446.6" id="path_edge_2a8e829d"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1521.37,-1450.1 1531.36,-1446.56 1521.34,-1443.1 1521.37,-1450.1"/>
</a>
</g>
<g id="a_edge_2a8e829d-label"><a xlink:title="13 [when: pg_clean|bool]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_2a8e829d" text-anchor="middle" startOffset="50%">13 [when: pg_clean|bool]</textPath></text>
</a>
</g>
<links><link target="task_8facabf2"/></links></g>
<!-- task_79756ab9 -->
<g id="task_79756ab9" class="node">
<title>task_79756ab9</title>
<g id="a_task_79756ab9"><a xlink:title="pg_remove : Remove pgbouncer_exporter service from consul">
<polygon fill="none" stroke="#9f2d42" points="1988.19,-1382.58 1988.19,-1397.49 1840.22,-1408.04 1630.95,-1408.04 1482.97,-1397.49 1482.97,-1382.58 1630.95,-1372.04 1840.22,-1372.04 1988.19,-1382.58"/>
<text text-anchor="middle" x="1735.58" y="-1386.34" font-family="Times,serif" font-size="14.00">pg_remove : Remove pgbouncer_exporter service from consul</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_79756ab9 -->
<g id="edge_eebf64e5" class="edge">
<title>role_5bbec4da-&gt;task_79756ab9</title>
<g id="a_edge_eebf64e5"><a xlink:title="14 [when: pg_clean|bool and dcs_registry == 'consul']">
<path fill="none" stroke="#9f2d42" d="M737.9,-1084C755.41,-1138.7 816.39,-1303.37 933.11,-1368.04 979.7,-1393.85 1257.12,-1396.66 1472.67,-1394.75" id="path_edge_eebf64e5"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1472.92,-1398.25 1482.89,-1394.65 1472.86,-1391.25 1472.92,-1398.25"/>
</a>
</g>
<g id="a_edge_eebf64e5-label"><a xlink:title="14 [when: pg_clean|bool and dcs_registry == 'consul']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_eebf64e5" text-anchor="middle" startOffset="50%">14 [when: pg_clean|bool and dcs_registry == 'consul']</textPath></text>
</a>
</g>
<links><link target="task_79756ab9"/></links></g>
<!-- task_1c79a8c9 -->
<g id="task_1c79a8c9" class="node">
<title>task_1c79a8c9</title>
<g id="a_task_1c79a8c9"><a xlink:title="pg_remove : Reload consul to dereigster pgbouncer_exporter">
<polygon fill="none" stroke="#9f2d42" points="1982.03,-1328.58 1982.03,-1343.49 1837.66,-1354.04 1633.5,-1354.04 1489.14,-1343.49 1489.14,-1328.58 1633.5,-1318.04 1837.66,-1318.04 1982.03,-1328.58"/>
<text text-anchor="middle" x="1735.58" y="-1332.34" font-family="Times,serif" font-size="14.00">pg_remove : Reload consul to dereigster pgbouncer_exporter</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_1c79a8c9 -->
<g id="edge_766350f3" class="edge">
<title>role_5bbec4da-&gt;task_1c79a8c9</title>
<g id="a_edge_766350f3"><a xlink:title="15 [when: pg_clean|bool and dcs_registry == 'consul']">
<path fill="none" stroke="#9f2d42" d="M740.73,-1084.19C763.38,-1131.64 831.74,-1259.17 933.11,-1309.04 1034.54,-1358.93 1329.77,-1356.39 1532.12,-1347.86" id="path_edge_766350f3"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1532.45,-1351.35 1542.29,-1347.43 1532.15,-1344.36 1532.45,-1351.35"/>
</a>
</g>
<g id="a_edge_766350f3-label"><a xlink:title="15 [when: pg_clean|bool and dcs_registry == 'consul']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_766350f3" text-anchor="middle" startOffset="50%">15 [when: pg_clean|bool and dcs_registry == 'consul']</textPath></text>
</a>
</g>
<links><link target="task_1c79a8c9"/></links></g>
<!-- task_2bf45117 -->
<g id="task_2bf45117" class="node">
<title>task_2bf45117</title>
<g id="a_task_2bf45117"><a xlink:title="pg_remove : Stop and disable pgbouncer_exporter service">
<polygon fill="none" stroke="#9f2d42" points="1970.52,-1274.58 1970.52,-1289.49 1832.9,-1300.04 1638.27,-1300.04 1500.65,-1289.49 1500.65,-1274.58 1638.27,-1264.04 1832.9,-1264.04 1970.52,-1274.58"/>
<text text-anchor="middle" x="1735.58" y="-1278.34" font-family="Times,serif" font-size="14.00">pg_remove : Stop and disable pgbouncer_exporter service</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_2bf45117 -->
<g id="edge_8fa8582c" class="edge">
<title>role_5bbec4da-&gt;task_2bf45117</title>
<g id="a_edge_8fa8582c"><a xlink:title="16 [when: pg_clean|bool]">
<path fill="none" stroke="#9f2d42" d="M745,-1083.91C773.25,-1122.56 846.35,-1213.34 933.11,-1249.04 1031.26,-1289.42 1296.67,-1293.41 1495.36,-1290.03" id="path_edge_8fa8582c"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1495.43,-1293.53 1505.37,-1289.86 1495.31,-1286.53 1495.43,-1293.53"/>
</a>
</g>
<g id="a_edge_8fa8582c-label"><a xlink:title="16 [when: pg_clean|bool]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_8fa8582c" text-anchor="middle" startOffset="50%">16 [when: pg_clean|bool]</textPath></text>
</a>
</g>
<links><link target="task_2bf45117"/></links></g>
<!-- task_66dd6b39 -->
<g id="task_66dd6b39" class="node">
<title>task_66dd6b39</title>
<g id="a_task_66dd6b39"><a xlink:title="pg_remove : Remove pgbouncer service from consul">
<polygon fill="none" stroke="#9f2d42" points="1952.43,-1220.58 1952.43,-1235.49 1825.41,-1246.04 1645.76,-1246.04 1518.73,-1235.49 1518.73,-1220.58 1645.76,-1210.04 1825.41,-1210.04 1952.43,-1220.58"/>
<text text-anchor="middle" x="1735.58" y="-1224.34" font-family="Times,serif" font-size="14.00">pg_remove : Remove pgbouncer service from consul</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_66dd6b39 -->
<g id="edge_920ddfa6" class="edge">
<title>role_5bbec4da-&gt;task_66dd6b39</title>
<g id="a_edge_920ddfa6"><a xlink:title="17 [when: pg_clean|bool and dcs_registry == 'consul']">
<path fill="none" stroke="#9f2d42" d="M752.06,-1083.48C786.03,-1112.53 859.37,-1169.9 933.11,-1193.04 1036.43,-1225.45 1309.95,-1231.4 1508.77,-1231.08" id="path_edge_920ddfa6"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1508.79,-1234.58 1518.78,-1231.06 1508.77,-1227.58 1508.79,-1234.58"/>
</a>
</g>
<g id="a_edge_920ddfa6-label"><a xlink:title="17 [when: pg_clean|bool and dcs_registry == 'consul']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_920ddfa6" text-anchor="middle" startOffset="50%">17 [when: pg_clean|bool and dcs_registry == 'consul']</textPath></text>
</a>
</g>
<links><link target="task_66dd6b39"/></links></g>
<!-- task_6985a1ad -->
<g id="task_6985a1ad" class="node">
<title>task_6985a1ad</title>
<g id="a_task_6985a1ad"><a xlink:title="pg_remove : Reload consul to dereigster pgbouncer">
<polygon fill="none" stroke="#9f2d42" points="1945.77,-1166.58 1945.77,-1181.49 1822.65,-1192.04 1648.52,-1192.04 1525.39,-1181.49 1525.39,-1166.58 1648.52,-1156.04 1822.65,-1156.04 1945.77,-1166.58"/>
<text text-anchor="middle" x="1735.58" y="-1170.34" font-family="Times,serif" font-size="14.00">pg_remove : Reload consul to dereigster pgbouncer</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_6985a1ad -->
<g id="edge_451ed3e4" class="edge">
<title>role_5bbec4da-&gt;task_6985a1ad</title>
<g id="a_edge_451ed3e4"><a xlink:title="18 [when: pg_clean|bool and dcs_registry == 'consul']">
<path fill="none" stroke="#9f2d42" d="M770.99,-1081.27C810.85,-1096.3 875.29,-1118.5 933.11,-1129.04 1127.84,-1164.51 1353.19,-1174.47 1515.24,-1176.31" id="path_edge_451ed3e4"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1515.3,-1179.81 1525.34,-1176.42 1515.38,-1172.81 1515.3,-1179.81"/>
</a>
</g>
<g id="a_edge_451ed3e4-label"><a xlink:title="18 [when: pg_clean|bool and dcs_registry == 'consul']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_451ed3e4" text-anchor="middle" startOffset="50%">18 [when: pg_clean|bool and dcs_registry == 'consul']</textPath></text>
</a>
</g>
<links><link target="task_6985a1ad"/></links></g>
<!-- task_903e2fc8 -->
<g id="task_903e2fc8" class="node">
<title>task_903e2fc8</title>
<g id="a_task_903e2fc8"><a xlink:title="pg_remove : Stop and disable pgbouncer service">
<polygon fill="none" stroke="#9f2d42" points="1933.85,-1112.58 1933.85,-1127.49 1817.71,-1138.04 1653.46,-1138.04 1537.31,-1127.49 1537.31,-1112.58 1653.46,-1102.04 1817.71,-1102.04 1933.85,-1112.58"/>
<text text-anchor="middle" x="1735.58" y="-1116.34" font-family="Times,serif" font-size="14.00">pg_remove : Stop and disable pgbouncer service</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_903e2fc8 -->
<g id="edge_0ae71e47" class="edge">
<title>role_5bbec4da-&gt;task_903e2fc8</title>
<g id="a_edge_0ae71e47"><a xlink:title="19 [when: pg_clean|bool]">
<path fill="none" stroke="#9f2d42" d="M798.84,-1073.17C837.89,-1077.16 888.26,-1081.94 933.11,-1085.04 1134.7,-1098.98 1365.23,-1108.36 1527.14,-1113.87" id="path_edge_0ae71e47"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1527.1,-1117.37 1537.21,-1114.21 1527.34,-1110.37 1527.1,-1117.37"/>
</a>
</g>
<g id="a_edge_0ae71e47-label"><a xlink:title="19 [when: pg_clean|bool]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_0ae71e47" text-anchor="middle" startOffset="50%">19 [when: pg_clean|bool]</textPath></text>
</a>
</g>
<links><link target="task_903e2fc8"/></links></g>
<!-- task_a67b6a23 -->
<g id="task_a67b6a23" class="node">
<title>task_a67b6a23</title>
<g id="a_task_a67b6a23"><a xlink:title="pg_remove : Get actuall pg_role">
<polygon fill="none" stroke="#9f2d42" points="1872.04,-1058.58 1872.04,-1073.49 1792.1,-1084.04 1679.06,-1084.04 1599.13,-1073.49 1599.13,-1058.58 1679.06,-1048.04 1792.1,-1048.04 1872.04,-1058.58"/>
<text text-anchor="middle" x="1735.58" y="-1062.34" font-family="Times,serif" font-size="14.00">pg_remove : Get actuall pg_role</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_a67b6a23 -->
<g id="edge_258cab48" class="edge">
<title>role_5bbec4da-&gt;task_a67b6a23</title>
<g id="a_edge_258cab48"><a xlink:title="20 [when: pg_clean|bool]">
<path fill="none" stroke="#9f2d42" d="M804.57,-1066.04C968.24,-1066.04 1370.63,-1066.04 1588.6,-1066.04" id="path_edge_258cab48"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1588.84,-1069.54 1598.84,-1066.04 1588.84,-1062.54 1588.84,-1069.54"/>
</a>
</g>
<g id="a_edge_258cab48-label"><a xlink:title="20 [when: pg_clean|bool]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_258cab48" text-anchor="middle" startOffset="50%">20 [when: pg_clean|bool]</textPath></text>
</a>
</g>
<links><link target="task_a67b6a23"/></links></g>
<!-- task_7c807471 -->
<g id="task_7c807471" class="node">
<title>task_7c807471</title>
<g id="a_task_7c807471"><a xlink:title="pg_remove : Get pg_role from result">
<polygon fill="none" stroke="#9f2d42" points="1888.81,-1004.58 1888.81,-1019.49 1799.05,-1030.04 1672.12,-1030.04 1582.36,-1019.49 1582.36,-1004.58 1672.12,-994.04 1799.05,-994.04 1888.81,-1004.58"/>
<text text-anchor="middle" x="1735.58" y="-1008.34" font-family="Times,serif" font-size="14.00">pg_remove : Get pg_role from result</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_7c807471 -->
<g id="edge_00061482" class="edge">
<title>role_5bbec4da-&gt;task_7c807471</title>
<g id="a_edge_00061482"><a xlink:title="21 [when: pg_clean|bool]">
<path fill="none" stroke="#9f2d42" d="M798.84,-1058.9C837.89,-1054.91 888.26,-1050.14 933.11,-1047.04 1154.27,-1031.75 1410.24,-1021.94 1572.25,-1016.71" id="path_edge_00061482"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1572.41,-1020.2 1582.3,-1016.39 1572.19,-1013.21 1572.41,-1020.2"/>
</a>
</g>
<g id="a_edge_00061482-label"><a xlink:title="21 [when: pg_clean|bool]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_00061482" text-anchor="middle" startOffset="50%">21 [when: pg_clean|bool]</textPath></text>
</a>
</g>
<links><link target="task_7c807471"/></links></g>
<!-- task_9ff138a7 -->
<g id="task_9ff138a7" class="node">
<title>task_9ff138a7</title>
<g id="a_task_9ff138a7"><a xlink:title="pg_remove : Set pg_role if applicable">
<polygon fill="none" stroke="#9f2d42" points="1892.34,-950.58 1892.34,-965.49 1800.51,-976.04 1670.65,-976.04 1578.82,-965.49 1578.82,-950.58 1670.65,-940.04 1800.51,-940.04 1892.34,-950.58"/>
<text text-anchor="middle" x="1735.58" y="-954.34" font-family="Times,serif" font-size="14.00">pg_remove : Set pg_role if applicable</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_9ff138a7 -->
<g id="edge_41396be8" class="edge">
<title>role_5bbec4da-&gt;task_9ff138a7</title>
<g id="a_edge_41396be8"><a xlink:title="22 [when: pg_clean|bool and pg_role_detected == 'primary' or pg_role_detected == 'replica']">
<path fill="none" stroke="#9f2d42" d="M802.07,-1070.65C838.86,-1069.65 882.93,-1062.62 915.11,-1039.04 929.86,-1028.23 917.88,-1012.16 933.11,-1002.04 1035.84,-933.78 1379.69,-938.88 1582.1,-948.53" id="path_edge_41396be8"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1582.07,-952.03 1592.23,-949.02 1582.41,-945.04 1582.07,-952.03"/>
</a>
</g>
<g id="a_edge_41396be8-label"><a xlink:title="22 [when: pg_clean|bool and pg_role_detected == 'primary' or pg_role_detected == 'replica']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_41396be8" text-anchor="middle" startOffset="50%">22 [when: pg_clean|bool and pg_role_detected == 'primary' or pg_role_detected == 'replica']</textPath></text>
</a>
</g>
<links><link target="task_9ff138a7"/></links></g>
<!-- task_110ccb43 -->
<g id="task_110ccb43" class="node">
<title>task_110ccb43</title>
<g id="a_task_110ccb43"><a xlink:title="pg_remove : Remove follower postgres service from consul">
<polygon fill="none" stroke="#9f2d42" points="1978.49,-896.58 1978.49,-911.49 1836.2,-922.04 1634.97,-922.04 1492.67,-911.49 1492.67,-896.58 1634.97,-886.04 1836.2,-886.04 1978.49,-896.58"/>
<text text-anchor="middle" x="1735.58" y="-900.34" font-family="Times,serif" font-size="14.00">pg_remove : Remove follower postgres service from consul</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_110ccb43 -->
<g id="edge_c6dc6787" class="edge">
<title>role_5bbec4da-&gt;task_110ccb43</title>
<g id="a_edge_c6dc6787"><a xlink:title="23 [when: pg_clean|bool and pg_role != 'primary' and dcs_registry == 'consul']">
<path fill="none" stroke="#9f2d42" d="M796.63,-1074.1C836.03,-1075.27 884.64,-1069.29 915.11,-1039.04 952.13,-1002.28 893.9,-957.45 933.11,-923.04 975.27,-886.04 1282.16,-888.1 1503.65,-894.7" id="path_edge_c6dc6787"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1503.7,-898.21 1513.8,-895.01 1503.91,-891.21 1503.7,-898.21"/>
</a>
</g>
<g id="a_edge_c6dc6787-label"><a xlink:title="23 [when: pg_clean|bool and pg_role != 'primary' and dcs_registry == 'consul']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_c6dc6787" text-anchor="middle" startOffset="50%">23 [when: pg_clean|bool and pg_role != 'primary' and dcs_registry == 'consul']</textPath></text>
</a>
</g>
<links><link target="task_110ccb43"/></links></g>
<!-- task_80b844fd -->
<g id="task_80b844fd" class="node">
<title>task_80b844fd</title>
<g id="a_task_80b844fd"><a xlink:title="pg_remove : Remove follower patroni service from consul">
<polygon fill="none" stroke="#9f2d42" points="1973.14,-842.58 1973.14,-857.49 1833.98,-868.04 1637.18,-868.04 1498.02,-857.49 1498.02,-842.58 1637.18,-832.04 1833.98,-832.04 1973.14,-842.58"/>
<text text-anchor="middle" x="1735.58" y="-846.34" font-family="Times,serif" font-size="14.00">pg_remove : Remove follower patroni service from consul</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_80b844fd -->
<g id="edge_be887cbd" class="edge">
<title>role_5bbec4da-&gt;task_80b844fd</title>
<g id="a_edge_be887cbd"><a xlink:title="24 [when: pg_clean|bool and pg_role != 'primary' and dcs_registry == 'consul']">
<path fill="none" stroke="#9f2d42" d="M795.78,-1074.53C835.62,-1076.07 885.02,-1070.34 915.11,-1039.04 940.98,-1012.13 905.68,-897.35 933.11,-872.04 974.28,-834.03 1280.76,-835.13 1502.5,-841.18" id="path_edge_be887cbd"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1502.57,-844.68 1512.66,-841.46 1502.76,-837.69 1502.57,-844.68"/>
</a>
</g>
<g id="a_edge_be887cbd-label"><a xlink:title="24 [when: pg_clean|bool and pg_role != 'primary' and dcs_registry == 'consul']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_be887cbd" text-anchor="middle" startOffset="50%">24 [when: pg_clean|bool and pg_role != 'primary' and dcs_registry == 'consul']</textPath></text>
</a>
</g>
<links><link target="task_80b844fd"/></links></g>
<!-- task_c963023a -->
<g id="task_c963023a" class="node">
<title>task_c963023a</title>
<g id="a_task_c963023a"><a xlink:title="pg_remove : Reload follower consul to dereigster postgres &amp; patroni">
<polygon fill="none" stroke="#9f2d42" points="2012.03,-788.58 2012.03,-803.49 1850.09,-814.04 1621.08,-814.04 1459.14,-803.49 1459.14,-788.58 1621.08,-778.04 1850.09,-778.04 2012.03,-788.58"/>
<text text-anchor="middle" x="1735.58" y="-792.34" font-family="Times,serif" font-size="14.00">pg_remove : Reload follower consul to dereigster postgres &amp; patroni</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_c963023a -->
<g id="edge_e714defd" class="edge">
<title>role_5bbec4da-&gt;task_c963023a</title>
<g id="a_edge_e714defd"><a xlink:title="25 [when: pg_clean|bool and pg_role != 'primary' and dcs_registry == 'consul']">
<path fill="none" stroke="#9f2d42" d="M795.61,-1074.77C835.64,-1076.48 885.31,-1070.84 915.11,-1039.04 948.65,-1003.24 897.52,-852.79 933.11,-819.04 972.17,-781.99 1256.65,-781.32 1475.7,-786.59" id="path_edge_e714defd"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1475.67,-790.09 1485.75,-786.83 1475.84,-783.09 1475.67,-790.09"/>
</a>
</g>
<g id="a_edge_e714defd-label"><a xlink:title="25 [when: pg_clean|bool and pg_role != 'primary' and dcs_registry == 'consul']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_e714defd" text-anchor="middle" startOffset="50%">25 [when: pg_clean|bool and pg_role != 'primary' and dcs_registry == 'consul']</textPath></text>
</a>
</g>
<links><link target="task_c963023a"/></links></g>
<!-- task_e710ecae -->
<g id="task_e710ecae" class="node">
<title>task_e710ecae</title>
<g id="a_task_e710ecae"><a xlink:title="pg_remove : Stop and disable follower patroni service">
<polygon fill="none" stroke="#9f2d42" points="1955.97,-734.58 1955.97,-749.49 1826.87,-760.04 1644.3,-760.04 1515.2,-749.49 1515.2,-734.58 1644.3,-724.04 1826.87,-724.04 1955.97,-734.58"/>
<text text-anchor="middle" x="1735.58" y="-738.34" font-family="Times,serif" font-size="14.00">pg_remove : Stop and disable follower patroni service</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_e710ecae -->
<g id="edge_4b5e4738" class="edge">
<title>role_5bbec4da-&gt;task_e710ecae</title>
<g id="a_edge_4b5e4738"><a xlink:title="26 [when: pg_clean|bool and pg_role != 'primary']">
<path fill="none" stroke="#9f2d42" d="M795.34,-1074.9C835.51,-1076.74 885.45,-1071.2 915.11,-1039.04 956.33,-994.34 889.35,-808.25 933.11,-766.04 974.06,-726.53 1289.58,-727.7 1512.27,-733.7" id="path_edge_4b5e4738"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1512.38,-737.2 1522.47,-733.98 1512.57,-730.2 1512.38,-737.2"/>
</a>
</g>
<g id="a_edge_4b5e4738-label"><a xlink:title="26 [when: pg_clean|bool and pg_role != 'primary']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_4b5e4738" text-anchor="middle" startOffset="50%">26 [when: pg_clean|bool and pg_role != 'primary']</textPath></text>
</a>
</g>
<links><link target="task_e710ecae"/></links></g>
<!-- task_b719b3af -->
<g id="task_b719b3af" class="node">
<title>task_b719b3af</title>
<g id="a_task_b719b3af"><a xlink:title="pg_remove : Stop and disable follower postgres service">
<polygon fill="none" stroke="#9f2d42" points="1960.82,-680.58 1960.82,-695.49 1828.88,-706.04 1642.29,-706.04 1510.35,-695.49 1510.35,-680.58 1642.29,-670.04 1828.88,-670.04 1960.82,-680.58"/>
<text text-anchor="middle" x="1735.58" y="-684.34" font-family="Times,serif" font-size="14.00">pg_remove : Stop and disable follower postgres service</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_b719b3af -->
<g id="edge_883c20e1" class="edge">
<title>role_5bbec4da-&gt;task_b719b3af</title>
<g id="a_edge_883c20e1"><a xlink:title="27 [when: pg_clean|bool and pg_role != 'primary']">
<path fill="none" stroke="#9f2d42" d="M795.01,-1074.99C835.3,-1076.93 885.52,-1071.47 915.11,-1039.04 964.16,-985.27 881.01,-762.85 933.11,-712.04 973.67,-672.48 1286.81,-673.53 1509.42,-679.54" id="path_edge_883c20e1"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1509.52,-683.04 1519.61,-679.82 1509.71,-676.04 1509.52,-683.04"/>
</a>
</g>
<g id="a_edge_883c20e1-label"><a xlink:title="27 [when: pg_clean|bool and pg_role != 'primary']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_883c20e1" text-anchor="middle" startOffset="50%">27 [when: pg_clean|bool and pg_role != 'primary']</textPath></text>
</a>
</g>
<links><link target="task_b719b3af"/></links></g>
<!-- task_9640819e -->
<g id="task_9640819e" class="node">
<title>task_9640819e</title>
<g id="a_task_9640819e"><a xlink:title="pg_remove : Force follower postgres shutdown">
<polygon fill="none" stroke="#9f2d42" points="1929,-626.58 1929,-641.49 1815.7,-652.04 1655.47,-652.04 1542.16,-641.49 1542.16,-626.58 1655.47,-616.04 1815.7,-616.04 1929,-626.58"/>
<text text-anchor="middle" x="1735.58" y="-630.34" font-family="Times,serif" font-size="14.00">pg_remove : Force follower postgres shutdown</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_9640819e -->
<g id="edge_da182343" class="edge">
<title>role_5bbec4da-&gt;task_9640819e</title>
<g id="a_edge_da182343"><a xlink:title="28 [when: pg_clean|bool and pg_role != 'primary']">
<path fill="none" stroke="#9f2d42" d="M794.65,-1075.04C835.05,-1077.07 885.54,-1071.71 915.11,-1039.04 943.55,-1007.62 902.88,-687.74 933.11,-658.04 974.97,-616.89 1309.55,-619.54 1532.98,-626.14" id="path_edge_da182343"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1533.1,-629.65 1543.2,-626.45 1533.31,-622.65 1533.1,-629.65"/>
</a>
</g>
<g id="a_edge_da182343-label"><a xlink:title="28 [when: pg_clean|bool and pg_role != 'primary']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_da182343" text-anchor="middle" startOffset="50%">28 [when: pg_clean|bool and pg_role != 'primary']</textPath></text>
</a>
</g>
<links><link target="task_9640819e"/></links></g>
<!-- task_1f52407f -->
<g id="task_1f52407f" class="node">
<title>task_1f52407f</title>
<g id="a_task_1f52407f"><a xlink:title="pg_remove : Remove leader postgres service from consul">
<polygon fill="none" stroke="#9f2d42" points="1969.2,-572.58 1969.2,-587.49 1832.35,-598.04 1638.81,-598.04 1501.96,-587.49 1501.96,-572.58 1638.81,-562.04 1832.35,-562.04 1969.2,-572.58"/>
<text text-anchor="middle" x="1735.58" y="-576.34" font-family="Times,serif" font-size="14.00">pg_remove : Remove leader postgres service from consul</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_1f52407f -->
<g id="edge_7c1b7cbb" class="edge">
<title>role_5bbec4da-&gt;task_1f52407f</title>
<g id="a_edge_7c1b7cbb"><a xlink:title="29 [when: pg_clean|bool and pg_role == 'primary' and dcs_registry == 'consul']">
<path fill="none" stroke="#9f2d42" d="M794.71,-1075.09C835.14,-1077.15 885.64,-1071.79 915.11,-1039.04 947.47,-1003.08 898.71,-638.05 933.11,-604.04 973.11,-564.49 1282.13,-565.31 1504.49,-571.3" id="path_edge_7c1b7cbb"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1504.59,-574.8 1514.68,-571.57 1504.78,-567.8 1504.59,-574.8"/>
</a>
</g>
<g id="a_edge_7c1b7cbb-label"><a xlink:title="29 [when: pg_clean|bool and pg_role == 'primary' and dcs_registry == 'consul']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_7c1b7cbb" text-anchor="middle" startOffset="50%">29 [when: pg_clean|bool and pg_role == 'primary' and dcs_registry == 'consul']</textPath></text>
</a>
</g>
<links><link target="task_1f52407f"/></links></g>
<!-- task_edea73ea -->
<g id="task_edea73ea" class="node">
<title>task_edea73ea</title>
<g id="a_task_edea73ea"><a xlink:title="pg_remove : Remove leader patroni service from consul">
<polygon fill="none" stroke="#9f2d42" points="1964.76,-518.58 1964.76,-533.49 1830.51,-544.04 1640.65,-544.04 1506.41,-533.49 1506.41,-518.58 1640.65,-508.04 1830.51,-508.04 1964.76,-518.58"/>
<text text-anchor="middle" x="1735.58" y="-522.34" font-family="Times,serif" font-size="14.00">pg_remove : Remove leader patroni service from consul</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_edea73ea -->
<g id="edge_6e5b08b4" class="edge">
<title>role_5bbec4da-&gt;task_edea73ea</title>
<g id="a_edge_6e5b08b4"><a xlink:title="30 [when: pg_clean|bool and pg_role == 'primary' and dcs_registry == 'consul']">
<path fill="none" stroke="#9f2d42" d="M794.76,-1075.14C835.21,-1077.22 885.71,-1071.86 915.11,-1039.04 951.38,-998.54 894.53,-588.35 933.11,-550.04 973.24,-510.18 1285.37,-511.26 1508.01,-517.36" id="path_edge_6e5b08b4"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1508.11,-520.86 1518.21,-517.64 1508.31,-513.86 1508.11,-520.86"/>
</a>
</g>
<g id="a_edge_6e5b08b4-label"><a xlink:title="30 [when: pg_clean|bool and pg_role == 'primary' and dcs_registry == 'consul']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_6e5b08b4" text-anchor="middle" startOffset="50%">30 [when: pg_clean|bool and pg_role == 'primary' and dcs_registry == 'consul']</textPath></text>
</a>
</g>
<links><link target="task_edea73ea"/></links></g>
<!-- task_a056bc45 -->
<g id="task_a056bc45" class="node">
<title>task_a056bc45</title>
<g id="a_task_a056bc45"><a xlink:title="pg_remove : Reload leader consul to dereigster postgres &amp; patroni">
<polygon fill="none" stroke="#9f2d42" points="2002.74,-464.58 2002.74,-479.49 1846.24,-490.04 1624.92,-490.04 1468.43,-479.49 1468.43,-464.58 1624.92,-454.04 1846.24,-454.04 2002.74,-464.58"/>
<text text-anchor="middle" x="1735.58" y="-468.34" font-family="Times,serif" font-size="14.00">pg_remove : Reload leader consul to dereigster postgres &amp; patroni</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_a056bc45 -->
<g id="edge_5290e658" class="edge">
<title>role_5bbec4da-&gt;task_a056bc45</title>
<g id="a_edge_5290e658"><a xlink:title="31 [when: pg_clean|bool and pg_role == 'primary' and dcs_registry == 'consul']">
<path fill="none" stroke="#9f2d42" d="M794.36,-1075.15C834.9,-1077.3 885.66,-1072.04 915.11,-1039.04 955.3,-994 890.36,-538.65 933.11,-496.04 971.68,-457.59 1262.51,-457.18 1482.83,-462.67" id="path_edge_5290e658"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1482.85,-466.17 1492.94,-462.92 1483.03,-459.17 1482.85,-466.17"/>
</a>
</g>
<g id="a_edge_5290e658-label"><a xlink:title="31 [when: pg_clean|bool and pg_role == 'primary' and dcs_registry == 'consul']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_5290e658" text-anchor="middle" startOffset="50%">31 [when: pg_clean|bool and pg_role == 'primary' and dcs_registry == 'consul']</textPath></text>
</a>
</g>
<links><link target="task_a056bc45"/></links></g>
<!-- task_1774bc4b -->
<g id="task_1774bc4b" class="node">
<title>task_1774bc4b</title>
<g id="a_task_1774bc4b"><a xlink:title="pg_remove : Stop and disable leader patroni service">
<polygon fill="none" stroke="#9f2d42" points="1946.68,-410.58 1946.68,-425.49 1823.02,-436.04 1648.14,-436.04 1524.49,-425.49 1524.49,-410.58 1648.14,-400.04 1823.02,-400.04 1946.68,-410.58"/>
<text text-anchor="middle" x="1735.58" y="-414.34" font-family="Times,serif" font-size="14.00">pg_remove : Stop and disable leader patroni service</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_1774bc4b -->
<g id="edge_b7db64e1" class="edge">
<title>role_5bbec4da-&gt;task_1774bc4b</title>
<g id="a_edge_b7db64e1"><a xlink:title="32 [when: pg_clean|bool and pg_role == 'primary']">
<path fill="none" stroke="#9f2d42" d="M794.39,-1075.18C834.95,-1077.34 885.71,-1072.08 915.11,-1039.04 959.22,-989.46 886.18,-488.96 933.11,-442.04 973.89,-401.26 1297.67,-403.22 1521.01,-409.67" id="path_edge_b7db64e1"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1521.13,-413.18 1531.23,-409.97 1521.34,-406.18 1521.13,-413.18"/>
</a>
</g>
<g id="a_edge_b7db64e1-label"><a xlink:title="32 [when: pg_clean|bool and pg_role == 'primary']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_b7db64e1" text-anchor="middle" startOffset="50%">32 [when: pg_clean|bool and pg_role == 'primary']</textPath></text>
</a>
</g>
<links><link target="task_1774bc4b"/></links></g>
<!-- task_46177fa1 -->
<g id="task_46177fa1" class="node">
<title>task_46177fa1</title>
<g id="a_task_46177fa1"><a xlink:title="pg_remove : Stop and disable leader postgres service">
<polygon fill="none" stroke="#9f2d42" points="1951.53,-356.58 1951.53,-371.49 1825.03,-382.04 1646.14,-382.04 1519.64,-371.49 1519.64,-356.58 1646.14,-346.04 1825.03,-346.04 1951.53,-356.58"/>
<text text-anchor="middle" x="1735.58" y="-360.34" font-family="Times,serif" font-size="14.00">pg_remove : Stop and disable leader postgres service</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_46177fa1 -->
<g id="edge_3082e953" class="edge">
<title>role_5bbec4da-&gt;task_46177fa1</title>
<g id="a_edge_3082e953"><a xlink:title="33 [when: pg_clean|bool and pg_role == 'primary']">
<path fill="none" stroke="#9f2d42" d="M794.42,-1075.2C834.98,-1077.38 885.75,-1072.12 915.11,-1039.04 963.14,-984.91 882,-439.26 933.11,-388.04 973.66,-347.4 1294.75,-349.17 1517.99,-355.57" id="path_edge_3082e953"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1518.12,-359.07 1528.22,-355.86 1518.32,-352.07 1518.12,-359.07"/>
</a>
</g>
<g id="a_edge_3082e953-label"><a xlink:title="33 [when: pg_clean|bool and pg_role == 'primary']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_3082e953" text-anchor="middle" startOffset="50%">33 [when: pg_clean|bool and pg_role == 'primary']</textPath></text>
</a>
</g>
<links><link target="task_46177fa1"/></links></g>
<!-- task_b6ed8434 -->
<g id="task_b6ed8434" class="node">
<title>task_b6ed8434</title>
<g id="a_task_b6ed8434"><a xlink:title="pg_remove : Force leader postgres shutdown">
<polygon fill="none" stroke="#9f2d42" points="1919.71,-302.58 1919.71,-317.49 1811.85,-328.04 1659.31,-328.04 1551.45,-317.49 1551.45,-302.58 1659.31,-292.04 1811.85,-292.04 1919.71,-302.58"/>
<text text-anchor="middle" x="1735.58" y="-306.34" font-family="Times,serif" font-size="14.00">pg_remove : Force leader postgres shutdown</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_b6ed8434 -->
<g id="edge_6803d987" class="edge">
<title>role_5bbec4da-&gt;task_b6ed8434</title>
<g id="a_edge_6803d987"><a xlink:title="34 [when: pg_clean|bool and pg_role == 'primary']">
<path fill="none" stroke="#9f2d42" d="M794.44,-1075.22C835.02,-1077.41 885.79,-1072.15 915.11,-1039.04 941.08,-1009.71 905.47,-361.8 933.11,-334.04 975.04,-291.93 1317.59,-295.31 1541.09,-302.24" id="path_edge_6803d987"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1541.21,-305.74 1551.31,-302.56 1541.43,-298.75 1541.21,-305.74"/>
</a>
</g>
<g id="a_edge_6803d987-label"><a xlink:title="34 [when: pg_clean|bool and pg_role == 'primary']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_6803d987" text-anchor="middle" startOffset="50%">34 [when: pg_clean|bool and pg_role == 'primary']</textPath></text>
</a>
</g>
<links><link target="task_b6ed8434"/></links></g>
<!-- task_2d8c28c8 -->
<g id="task_2d8c28c8" class="node">
<title>task_2d8c28c8</title>
<g id="a_task_2d8c28c8"><a xlink:title="pg_remove : Remove consul metadata about pgsql cluster">
<polygon fill="none" stroke="#9f2d42" points="1970.52,-248.58 1970.52,-263.49 1832.9,-274.04 1638.27,-274.04 1500.65,-263.49 1500.65,-248.58 1638.27,-238.04 1832.9,-238.04 1970.52,-248.58"/>
<text text-anchor="middle" x="1735.58" y="-252.34" font-family="Times,serif" font-size="14.00">pg_remove : Remove consul metadata about pgsql cluster</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_2d8c28c8 -->
<g id="edge_3197b705" class="edge">
<title>role_5bbec4da-&gt;task_2d8c28c8</title>
<g id="a_edge_3197b705"><a xlink:title="35 [when: pg_clean|bool and pg_role == 'primary' and pg_dcs_type == 'consul']">
<path fill="none" stroke="#9f2d42" d="M794.46,-1075.24C835.04,-1077.43 885.82,-1072.17 915.11,-1039.04 943.04,-1007.43 903.38,-309.95 933.11,-280.04 972.79,-240.11 1282.34,-241.06 1504.86,-247.17" id="path_edge_3197b705"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1504.96,-250.67 1515.06,-247.45 1505.16,-243.67 1504.96,-250.67"/>
</a>
</g>
<g id="a_edge_3197b705-label"><a xlink:title="35 [when: pg_clean|bool and pg_role == 'primary' and pg_dcs_type == 'consul']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_3197b705" text-anchor="middle" startOffset="50%">35 [when: pg_clean|bool and pg_role == 'primary' and pg_dcs_type == 'consul']</textPath></text>
</a>
</g>
<links><link target="task_2d8c28c8"/></links></g>
<!-- task_9f830309 -->
<g id="task_9f830309" class="node">
<title>task_9f830309</title>
<g id="a_task_9f830309"><a xlink:title="pg_remove : Remove etcd metadata about pgsql cluster">
<polygon fill="none" stroke="#9f2d42" points="1961.22,-194.58 1961.22,-209.49 1829.05,-220.04 1642.12,-220.04 1509.94,-209.49 1509.94,-194.58 1642.12,-184.04 1829.05,-184.04 1961.22,-194.58"/>
<text text-anchor="middle" x="1735.58" y="-198.34" font-family="Times,serif" font-size="14.00">pg_remove : Remove etcd metadata about pgsql cluster</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_9f830309 -->
<g id="edge_7c60a9e9" class="edge">
<title>role_5bbec4da-&gt;task_9f830309</title>
<g id="a_edge_7c60a9e9"><a xlink:title="36 [when: pg_clean|bool and pg_role == 'primary' and pg_dcs_type == 'etcd']">
<path fill="none" stroke="#9f2d42" d="M794.47,-1075.25C835.07,-1077.45 885.85,-1072.2 915.11,-1039.04 945.04,-1005.12 901.23,-257.13 933.11,-225.04 973.33,-184.55 1290.87,-186.5 1513.95,-193.12" id="path_edge_7c60a9e9"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1514.07,-196.63 1524.17,-193.43 1514.28,-189.63 1514.07,-196.63"/>
</a>
</g>
<g id="a_edge_7c60a9e9-label"><a xlink:title="36 [when: pg_clean|bool and pg_role == 'primary' and pg_dcs_type == 'etcd']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_7c60a9e9" text-anchor="middle" startOffset="50%">36 [when: pg_clean|bool and pg_role == 'primary' and pg_dcs_type == 'etcd']</textPath></text>
</a>
</g>
<links><link target="task_9f830309"/></links></g>
<!-- task_114546a1 -->
<g id="task_114546a1" class="node">
<title>task_114546a1</title>
<g id="a_task_114546a1"><a xlink:title="pg_remove : Remove postgres data">
<polygon fill="none" stroke="#9f2d42" points="1883.55,-140.58 1883.55,-155.49 1796.87,-166.04 1674.29,-166.04 1587.62,-155.49 1587.62,-140.58 1674.29,-130.04 1796.87,-130.04 1883.55,-140.58"/>
<text text-anchor="middle" x="1735.58" y="-144.34" font-family="Times,serif" font-size="14.00">pg_remove : Remove postgres data</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_114546a1 -->
<g id="edge_33c97c23" class="edge">
<title>role_5bbec4da-&gt;task_114546a1</title>
<g id="a_edge_33c97c23"><a xlink:title="37 [when: pg_clean|bool and rm_pgdata|bool]">
<path fill="none" stroke="#9f2d42" d="M794.49,-1075.26C835.09,-1077.47 885.87,-1072.22 915.11,-1039.04 947,-1002.85 899.14,-205.28 933.11,-171.04 977.31,-126.48 1357.03,-133.29 1577.57,-141.2" id="path_edge_33c97c23"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1577.51,-144.7 1587.63,-141.57 1577.76,-137.71 1577.51,-144.7"/>
</a>
</g>
<g id="a_edge_33c97c23-label"><a xlink:title="37 [when: pg_clean|bool and rm_pgdata|bool]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_33c97c23" text-anchor="middle" startOffset="50%">37 [when: pg_clean|bool and rm_pgdata|bool]</textPath></text>
</a>
</g>
<links><link target="task_114546a1"/></links></g>
<!-- task_5479efdb -->
<g id="task_5479efdb" class="node">
<title>task_5479efdb</title>
<g id="a_task_5479efdb"><a xlink:title="pg_remove : Remove pg packages">
<polygon fill="none" stroke="#9f2d42" points="1880.42,-86.58 1880.42,-101.49 1795.58,-112.04 1675.59,-112.04 1590.74,-101.49 1590.74,-86.58 1675.59,-76.04 1795.58,-76.04 1880.42,-86.58"/>
<text text-anchor="middle" x="1735.58" y="-90.34" font-family="Times,serif" font-size="14.00">pg_remove : Remove pg packages</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_5479efdb -->
<g id="edge_649f483c" class="edge">
<title>role_5bbec4da-&gt;task_5479efdb</title>
<g id="a_edge_649f483c"><a xlink:title="38 [when: pg_clean|bool and rm_pgpkgs|bool]">
<path fill="none" stroke="#9f2d42" d="M794.06,-1075.25C834.74,-1077.53 885.78,-1072.36 915.11,-1039.04 948.96,-1000.58 897.05,-153.43 933.11,-117.04 977.47,-72.27 1360.13,-79.33 1580.27,-87.29" id="path_edge_649f483c"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1580.18,-90.79 1590.3,-87.66 1580.44,-83.8 1580.18,-90.79"/>
</a>
</g>
<g id="a_edge_649f483c-label"><a xlink:title="38 [when: pg_clean|bool and rm_pgpkgs|bool]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_649f483c" text-anchor="middle" startOffset="50%">38 [when: pg_clean|bool and rm_pgpkgs|bool]</textPath></text>
</a>
</g>
<links><link target="task_5479efdb"/></links></g>
<!-- task_768d78f6 -->
<g id="task_768d78f6" class="node">
<title>task_768d78f6</title>
<g id="a_task_768d78f6"><a xlink:title="pg_remove : Remove pg extensions">
<polygon fill="none" stroke="#9f2d42" points="1885.27,-32.58 1885.27,-47.49 1797.59,-58.04 1673.58,-58.04 1585.89,-47.49 1585.89,-32.58 1673.58,-22.04 1797.59,-22.04 1885.27,-32.58"/>
<text text-anchor="middle" x="1735.58" y="-36.34" font-family="Times,serif" font-size="14.00">pg_remove : Remove pg extensions</text>
</a>
</g>
</g>
<!-- role_5bbec4da&#45;&gt;task_768d78f6 -->
<g id="edge_b14783e3" class="edge">
<title>role_5bbec4da-&gt;task_768d78f6</title>
<g id="a_edge_b14783e3"><a xlink:title="39 [when: pg_clean|bool and rm_pgpkgs|bool]">
<path fill="none" stroke="#9f2d42" d="M794.07,-1075.26C834.76,-1077.54 885.8,-1072.37 915.11,-1039.04 950.92,-998.31 894.96,-101.58 933.11,-63.04 1026.71,31.53 1427.48,-2.32 1624.44,-25.52" id="path_edge_b14783e3"/>
<polygon fill="#9f2d42" stroke="#9f2d42" points="1624.19,-29.02 1634.53,-26.72 1625.01,-22.07 1624.19,-29.02"/>
</a>
</g>
<g id="a_edge_b14783e3-label"><a xlink:title="39 [when: pg_clean|bool and rm_pgpkgs|bool]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#9f2d42" dy="-1%"><textPath xlink:href="#path_edge_b14783e3" text-anchor="middle" startOffset="50%">39 [when: pg_clean|bool and rm_pgpkgs|bool]</textPath></text>
</a>
</g>
<links><link target="task_768d78f6"/></links></g>
<!-- task_73fc5031 -->
<g id="task_73fc5031" class="node">
<title>task_73fc5031</title>
<g id="a_task_73fc5031"><a xlink:title="Stop and disable systemd infra service">
<polygon fill="none" stroke="#1809c3" points="915.22,-1004.58 915.22,-1019.49 807.6,-1030.04 655.4,-1030.04 547.78,-1019.49 547.78,-1004.58 655.4,-994.04 807.6,-994.04 915.22,-1004.58"/>
<text text-anchor="middle" x="731.5" y="-1008.34" font-family="Times,serif" font-size="14.00">[task] Stop and disable systemd infra service</text>
</a>
</g>
</g>
<!-- play_7e69963a&#45;&gt;task_73fc5031 -->
<g id="edge_852d7cbf" class="edge">
<title>play_7e69963a-&gt;task_73fc5031</title>
<g id="a_edge_852d7cbf"><a xlink:title="1 ">
<path fill="none" stroke="#1809c3" d="M344.94,-987.14C353.67,-988.22 362.47,-989.21 370.89,-990.04 427.26,-995.55 488.76,-999.92 544.69,-1003.26" id="path_edge_852d7cbf"/>
<polygon fill="#1809c3" stroke="#1809c3" points="544.52,-1006.75 554.7,-1003.85 544.93,-999.77 544.52,-1006.75"/>
</a>
</g>
<g id="a_edge_852d7cbf-label"><a xlink:title="1 ">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#1809c3" dy="-1%"><textPath xlink:href="#path_edge_852d7cbf" text-anchor="middle" startOffset="50%">1 </textPath></text>
</a>
</g>
<links><link target="task_73fc5031"/></links></g>
<!-- task_654f0533 -->
<g id="task_654f0533" class="node">
<title>task_654f0533</title>
<g id="a_task_654f0533"><a xlink:title="Remove infra data on meta nodes">
<polygon fill="none" stroke="#1809c3" points="897.55,-950.58 897.55,-965.49 800.28,-976.04 662.72,-976.04 565.45,-965.49 565.45,-950.58 662.72,-940.04 800.28,-940.04 897.55,-950.58"/>
<text text-anchor="middle" x="731.5" y="-954.34" font-family="Times,serif" font-size="14.00">[task] Remove infra data on meta nodes</text>
</a>
</g>
</g>
<!-- play_7e69963a&#45;&gt;task_654f0533 -->
<g id="edge_237400b6" class="edge">
<title>play_7e69963a-&gt;task_654f0533</title>
<g id="a_edge_237400b6"><a xlink:title="2 [when: rm_metadata|bool]">
<path fill="none" stroke="#1809c3" d="M345.15,-974.09C401.19,-971.75 481.94,-968.39 555.06,-965.35" id="path_edge_237400b6"/>
<polygon fill="#1809c3" stroke="#1809c3" points="555.48,-968.83 565.32,-964.92 555.18,-961.84 555.48,-968.83"/>
</a>
</g>
<g id="a_edge_237400b6-label"><a xlink:title="2 [when: rm_metadata|bool]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#1809c3" dy="-1%"><textPath xlink:href="#path_edge_237400b6" text-anchor="middle" startOffset="50%">2 [when: rm_metadata|bool]</textPath></text>
</a>
</g>
<links><link target="task_654f0533"/></links></g>
<!-- task_671ad1d4 -->
<g id="task_671ad1d4" class="node">
<title>task_671ad1d4</title>
<g id="a_task_671ad1d4"><a xlink:title="Uninstall meta packages">
<polygon fill="none" stroke="#1809c3" points="861.79,-896.58 861.79,-911.49 785.47,-922.04 677.53,-922.04 601.21,-911.49 601.21,-896.58 677.53,-886.04 785.47,-886.04 861.79,-896.58"/>
<text text-anchor="middle" x="731.5" y="-900.34" font-family="Times,serif" font-size="14.00">[task] Uninstall meta packages</text>
</a>
</g>
</g>
<!-- play_7e69963a&#45;&gt;task_671ad1d4 -->
<g id="edge_cd4f7fd7" class="edge">
<title>play_7e69963a-&gt;task_671ad1d4</title>
<g id="a_edge_cd4f7fd7"><a xlink:title="3 [when: rm_metapkgs|bool]">
<path fill="none" stroke="#1809c3" d="M326.26,-959.01C340.58,-954.55 356.22,-950.17 370.89,-947.04 446.2,-930.97 531.76,-920.43 600.53,-913.81" id="path_edge_cd4f7fd7"/>
<polygon fill="#1809c3" stroke="#1809c3" points="600.92,-917.29 610.55,-912.86 600.26,-910.32 600.92,-917.29"/>
</a>
</g>
<g id="a_edge_cd4f7fd7-label"><a xlink:title="3 [when: rm_metapkgs|bool]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#1809c3" dy="-1%"><textPath xlink:href="#path_edge_cd4f7fd7" text-anchor="middle" startOffset="50%">3 [when: rm_metapkgs|bool]</textPath></text>
</a>
</g>
<links><link target="task_671ad1d4"/></links></g>
</g>
</svg>