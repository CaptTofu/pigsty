<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 6.0.2 (20221011.1828)
 --><!-- Pages: 1 --><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1979pt" height="807pt" viewBox="0.00 0.00 1979.19 807.00" id="svg">
<script type="text/javascript" href="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js" id="jquery"/><script type="text/javascript" id="my_javascript"><![CDATA[/**
 * This file contains the functions responsible to highlight the plays, roles and tasks when rendering the SVG file in a browser
 * or any SVG reader that support Javascript.
 */

/**
 * The name of the CSS class for highlighted elements
 * @type {string}
 */
const HIGHLIGHT_CLASS = "highlight";

/**
 * The current selected element on the graph
 * @type {null}
 */
let currentSelectedElement = null;

/**
 * Highlight the linked nodes of the given root element
 * @param {Element} parentElement
 * @param {string[]} visitedElements
 */
function highlightLinkedNodes(parentElement, visitedElements = []) {
    $(parentElement).find('link').each(function (index, element) {
        const linkedElementId = $(element).attr('target');
        const edgeId = $(element).attr('edge');

        const currentElement = $(`#${linkedElementId}`);
        currentElement.addClass(HIGHLIGHT_CLASS);

        // Highlight the edge point to the target
        $(`#${edgeId}`).addClass(HIGHLIGHT_CLASS);

        if (!visitedElements.includes(linkedElementId)) {
            visitedElements.push(linkedElementId);
            // Recursively highlight
            highlightLinkedNodes(currentElement, visitedElements);
        }
    })
}


/**
 * Unhighlight the linked nodes of the given root element
 * @param {Element} parentElement
 * @param {string[]} visitedElements
 * @param {boolean} isHover True when we are coming from a mouseleave event. In that case, we should not unhighlight if
 * the parentElement is the current selected element
 */
function unHighlightLinkedNodes(parentElement, visitedElements = [], isHover) {
    const currentSelectedElementId = $(currentSelectedElement).attr('id');
    // Do not unhighlight the current selected element
    if ($(parentElement).attr('id') !== currentSelectedElementId || !isHover) {

        $(parentElement).find('link').each(function (index, element) {
            const linkedElementId = $(element).attr('target');
            const edgeId = $(element).attr('edge');

            const linkedElement = $(`#${linkedElementId}`);

            if (linkedElement.attr('id') !== currentSelectedElementId) {
                linkedElement.removeClass(HIGHLIGHT_CLASS);

                // Unhighlight the edge point to the target
                $(`#${edgeId}`).removeClass(HIGHLIGHT_CLASS);

                if (!visitedElements.includes(linkedElementId)) {
                    visitedElements.push(linkedElementId);
                    // Recursively unhighlight
                    unHighlightLinkedNodes(linkedElement, visitedElements, isHover);
                }
            }

        })
    }

}

/**
 * Hover handler for mouseenter event
 * @param {Event} event
 */
function hoverMouseEnter(event) {
    highlightLinkedNodes(event.currentTarget, []);
}

/**
 * Hover handler for mouseleave event
 * @param {Event} event
 */
function hoverMouseLeave(event) {
    unHighlightLinkedNodes(event.currentTarget, [], true);
}

/**
 * Handler when clicking on some elements
 * @param {Event} event
 */
function clickOnElement(event) {
    const newClickedElement = $(event.currentTarget);

    event.preventDefault(); // Disable the default click behavior since we override it here

    if (newClickedElement.attr('id') === $(currentSelectedElement).attr('id')) { // clicking again on the same element
        newClickedElement.removeClass(HIGHLIGHT_CLASS);
        unHighlightLinkedNodes(currentSelectedElement, [], false);
        currentSelectedElement = null;
    } else { // clicking on a different node

        // Remove highlight from all the nodes linked to the current selected node
        unHighlightLinkedNodes(currentSelectedElement, [], false);
        if (currentSelectedElement) {
            currentSelectedElement.removeClass(HIGHLIGHT_CLASS);
        }

        newClickedElement.addClass(HIGHLIGHT_CLASS);
        highlightLinkedNodes(newClickedElement, []);
        currentSelectedElement = newClickedElement;
    }
}

/**
 * Handler when double clicking on some elements
 * @param {Event} event
 */
function dblClickElement(event) {
    const newElementDlbClicked = event.currentTarget;
    const links = $(newElementDlbClicked).find("a[xlink\\:href]");

    if (links.length > 0) {
        document.location = $(links[0]).attr("xlink:href");
    } else {
        console.log("No links found on this element");
    }
}


$("#svg").ready(function () {
    let playbooks = $("g[id^=playbook_]");
    let plays = $("g[id^=play_]");
    let roles = $("g[id^=role_]");
    let blocks = $("g[id^=block_]");
    let tasks = $("g[id^=pre_task_], g[id^=task_], g[id^=post_task_]");

    playbooks.hover(hoverMouseEnter, hoverMouseLeave);
    playbooks.click(clickOnElement);
    playbooks.dblclick(dblClickElement);

    // Set hover and click events on the plays
    plays.hover(hoverMouseEnter, hoverMouseLeave);
    plays.click(clickOnElement);
    plays.dblclick(dblClickElement);

    // Set hover and click events on the roles
    roles.hover(hoverMouseEnter, hoverMouseLeave);
    roles.click(clickOnElement);
    roles.dblclick(dblClickElement);

    // Set hover and click events on the blocks
    blocks.hover(hoverMouseEnter, hoverMouseLeave);
    blocks.click(clickOnElement);
    blocks.dblclick(dblClickElement);

    // Set hover and click events on the tasks
    tasks.hover(hoverMouseEnter, hoverMouseLeave);
    tasks.click(clickOnElement);
    tasks.dblclick(dblClickElement);

});
]]></script><style type="text/css" id="my_css"><![CDATA[/**
 Hover on nodes, edges, path and polygon
 */
.node:hover, .edge:hover, path:hover, path + polygon:hover {
    cursor: pointer;
    stroke-width: 3;
    font-weight: bolder;
}

/**
 Manually added class by the script highlight-hover.js when hovering on plays and roles
 */
.highlight {
    cursor: pointer;
    stroke-width: 3;
    font-weight: bolder;
}
]]></style><g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 803)">
<polygon fill="white" stroke="none" points="-4,4 -4,-803 1975.19,-803 1975.19,4 -4,4"/>
<g id="clust5" class="cluster">
<title>cluster_block_2ef13097</title>
<polygon fill="none" stroke="black" points="1144.31,-8 1144.31,-168 1963.19,-168 1963.19,-8 1144.31,-8"/>
</g>
<!-- redis.yml -->
<g id="playbook_ac3e6b55" class="node">
<title>redis.yml</title>
<g id="a_playbook_ac3e6b55"><a xlink:href="/Users/vonng/pigsty/redis.yml" xlink:title="redis.yml">
<ellipse fill="none" stroke="black" stroke-dasharray="1,5" cx="44.2" cy="-302" rx="44.39" ry="18"/>
<text text-anchor="middle" x="44.2" y="-298.3" font-family="Times,serif" font-size="14.00">redis.yml</text>
</a>
</g>
<links><link target="play_37654ab9" edge="edge_1_playbook_ac3e6b55_play_37654ab9"/><link target="play_b0b1a09d" edge="edge_2_playbook_ac3e6b55_play_b0b1a09d"/><link target="play_65cf9535" edge="edge_3_playbook_ac3e6b55_play_65cf9535"/></links></g>
<!-- play_37654ab9 -->
<g id="play_37654ab9" class="node">
<title>play_37654ab9</title>
<g id="a_play_37654ab9"><a xlink:href="/Users/vonng/pigsty/redis.yml" xlink:title="10.10.10.10,10.10.10.11,10.10.10.12,10.10.10.13">
<polygon fill="#af1d9c" stroke="#af1d9c" points="464.39,-563 333.39,-563 333.39,-527 464.39,-527 464.39,-563"/>
<text text-anchor="middle" x="398.89" y="-541.3" font-family="Times,serif" font-size="14.00" fill="#ffffff">Play: Redis Node (4)</text>
</a>
</g>
<links><link target="task_d2987674" edge="edge_1_play_37654ab9_task_d2987674"/><link target="task_82eeb3f2" edge="edge_2_play_37654ab9_task_82eeb3f2"/><link target="task_2a3c8db2" edge="edge_3_play_37654ab9_task_2a3c8db2"/><link target="task_9d2539ea" edge="edge_4_play_37654ab9_task_9d2539ea"/><link target="task_4716f750" edge="edge_5_play_37654ab9_task_4716f750"/><link target="task_1c340dd7" edge="edge_6_play_37654ab9_task_1c340dd7"/><link target="task_92587506" edge="edge_7_play_37654ab9_task_92587506"/></links></g>
<!-- redis.yml&#45;&gt;play_37654ab9 -->
<g id="edge_playbook_ac3e6b55_play_37654ab9" class="edge">
<title>redis.yml-&gt;play_37654ab9</title>
<g id="a_edge_playbook_ac3e6b55_play_37654ab9"><a xlink:title="1 Play: Redis Node (4)">
<path fill="none" stroke="#af1d9c" d="M67.53,-317.39C127.33,-358.59 291.45,-471.66 363.36,-521.21" id="path_edge_playbook_ac3e6b55_play_37654ab9"/>
<polygon fill="#af1d9c" stroke="#af1d9c" points="361.44,-524.14 371.66,-526.93 365.41,-518.37 361.44,-524.14"/>
</a>
</g>
<g id="a_edge_playbook_ac3e6b55_play_37654ab9-label"><a xlink:title="1 Play: Redis Node (4)">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#af1d9c" dy="-0.2%"><textPath xlink:href="#path_edge_playbook_ac3e6b55_play_37654ab9" startOffset="251.02726973241244">1 Play: Redis Node (4)</textPath></text>
</a>
</g>
</g>
<!-- play_b0b1a09d -->
<g id="play_b0b1a09d" class="node">
<title>play_b0b1a09d</title>
<g id="a_play_b0b1a09d"><a xlink:href="/Users/vonng/pigsty/redis.yml" xlink:title="10.10.10.10,10.10.10.11,10.10.10.12,10.10.10.13">
<polygon fill="#02ca03" stroke="#02ca03" points="492.39,-320 305.39,-320 305.39,-284 492.39,-284 492.39,-320"/>
<text text-anchor="middle" x="398.89" y="-298.3" font-family="Times,serif" font-size="14.00" fill="#ffffff">Play: Setup Redis Instances (4)</text>
</a>
</g>
<links><link target="task_c79e54ab" edge="edge_1_play_b0b1a09d_task_c79e54ab"/><link target="role_415fbc62" edge="edge_2_play_b0b1a09d_role_415fbc62"/><link target="task_15fa295d" edge="edge_3_play_b0b1a09d_task_15fa295d"/></links></g>
<!-- redis.yml&#45;&gt;play_b0b1a09d -->
<g id="edge_playbook_ac3e6b55_play_b0b1a09d" class="edge">
<title>redis.yml-&gt;play_b0b1a09d</title>
<g id="a_edge_playbook_ac3e6b55_play_b0b1a09d"><a xlink:title="2 Play: Setup Redis Instances (4)">
<path fill="none" stroke="#02ca03" d="M88.44,-302C139.64,-302 226.61,-302 295.34,-302" id="path_edge_playbook_ac3e6b55_play_b0b1a09d"/>
<polygon fill="#02ca03" stroke="#02ca03" points="295.34,-305.5 305.34,-302 295.34,-298.5 295.34,-305.5"/>
</a>
</g>
<g id="a_edge_playbook_ac3e6b55_play_b0b1a09d-label"><a xlink:title="2 Play: Setup Redis Instances (4)">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#02ca03" dy="-0.2%"><textPath xlink:href="#path_edge_playbook_ac3e6b55_play_b0b1a09d" startOffset="124.24399999999997">2 Play: Setup Redis Instances (4)</textPath></text>
</a>
</g>
</g>
<!-- play_65cf9535 -->
<g id="play_65cf9535" class="node">
<title>play_65cf9535</title>
<g id="a_play_65cf9535"><a xlink:href="/Users/vonng/pigsty/redis.yml" xlink:title="10.10.10.10,10.10.10.11,10.10.10.12,10.10.10.13">
<polygon fill="#bc7410" stroke="#bc7410" points="478.89,-212 318.89,-212 318.89,-176 478.89,-176 478.89,-212"/>
<text text-anchor="middle" x="398.89" y="-190.3" font-family="Times,serif" font-size="14.00" fill="#ffffff">Play: Join redis cluster (4)</text>
</a>
</g>
<links><link target="task_7696d06e" edge="edge_1_play_65cf9535_task_7696d06e"/><link target="block_2ef13097" edge="edge_2_play_65cf9535_block_2ef13097"/></links></g>
<!-- redis.yml&#45;&gt;play_65cf9535 -->
<g id="edge_playbook_ac3e6b55_play_65cf9535" class="edge">
<title>redis.yml-&gt;play_65cf9535</title>
<g id="a_edge_playbook_ac3e6b55_play_65cf9535"><a xlink:title="3 Play: Join redis cluster (4)">
<path fill="none" stroke="#bc7410" d="M79.82,-291.22C88.49,-288.53 97.78,-285.65 106.39,-283 182.44,-259.59 269.73,-232.97 328.81,-214.99" id="path_edge_playbook_ac3e6b55_play_65cf9535"/>
<polygon fill="#bc7410" stroke="#bc7410" points="329.86,-218.33 338.41,-212.07 327.82,-211.63 329.86,-218.33"/>
</a>
</g>
<g id="a_edge_playbook_ac3e6b55_play_65cf9535-label"><a xlink:title="3 Play: Join redis cluster (4)">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#bc7410" dy="-0.2%"><textPath xlink:href="#path_edge_playbook_ac3e6b55_play_65cf9535" startOffset="167.90253156262386">3 Play: Join redis cluster (4)</textPath></text>
</a>
</g>
</g>
<!-- task_d2987674 -->
<g id="task_d2987674" class="node">
<title>task_d2987674</title>
<g id="a_task_d2987674"><a xlink:href="/Users/vonng/pigsty/redis.yml" xlink:title="Install redis and exporter">
<polygon fill="none" stroke="#af1d9c" points="1382.42,-726.54 1382.42,-741.46 1305.33,-752 1196.3,-752 1119.21,-741.46 1119.21,-726.54 1196.3,-716 1305.33,-716 1382.42,-726.54"/>
<text text-anchor="middle" x="1250.81" y="-730.3" font-family="Times,serif" font-size="14.00">[task] Install redis and exporter</text>
</a>
</g>
</g>
<!-- play_37654ab9&#45;&gt;task_d2987674 -->
<g id="edge_1_play_37654ab9_task_d2987674" class="edge">
<title>play_37654ab9-&gt;task_d2987674</title>
<g id="a_edge_1_play_37654ab9_task_d2987674"><a xlink:title="1 [when: not redis_port is defined]">
<path fill="none" stroke="#af1d9c" d="M406.06,-563.17C419.03,-598.17 452.79,-674.26 510.39,-706 725.48,-824.5 1031.65,-781.64 1172.94,-752.33" id="path_edge_1_play_37654ab9_task_d2987674"/>
<polygon fill="#af1d9c" stroke="#af1d9c" points="1173.76,-755.73 1182.82,-750.24 1172.31,-748.88 1173.76,-755.73"/>
</a>
</g>
<g id="a_edge_1_play_37654ab9_task_d2987674-label"><a xlink:title="1 [when: not redis_port is defined]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#af1d9c" dy="-0.2%"><textPath xlink:href="#path_edge_1_play_37654ab9_task_d2987674" startOffset="616.6506010249589">1 [when: not redis_port is defined]</textPath></text>
</a>
</g>
</g>
<!-- task_82eeb3f2 -->
<g id="task_82eeb3f2" class="node">
<title>task_82eeb3f2</title>
<g id="a_task_82eeb3f2"><a xlink:href="/Users/vonng/pigsty/redis.yml" xlink:title="Create user redis">
<polygon fill="none" stroke="#af1d9c" points="1351.51,-672.54 1351.51,-687.46 1292.52,-698 1209.1,-698 1150.11,-687.46 1150.11,-672.54 1209.1,-662 1292.52,-662 1351.51,-672.54"/>
<text text-anchor="middle" x="1250.81" y="-676.3" font-family="Times,serif" font-size="14.00">[task] Create user redis</text>
</a>
</g>
</g>
<!-- play_37654ab9&#45;&gt;task_82eeb3f2 -->
<g id="edge_2_play_37654ab9_task_82eeb3f2" class="edge">
<title>play_37654ab9-&gt;task_82eeb3f2</title>
<g id="a_edge_2_play_37654ab9_task_82eeb3f2"><a xlink:title="2 [when: not redis_port is defined]">
<path fill="none" stroke="#af1d9c" d="M412.78,-563.07C431.24,-587.26 467.74,-629.22 510.39,-647 620.92,-693.08 962.45,-689.56 1140.03,-684.23" id="path_edge_2_play_37654ab9_task_82eeb3f2"/>
<polygon fill="#af1d9c" stroke="#af1d9c" points="1140.29,-687.72 1150.18,-683.92 1140.08,-680.73 1140.29,-687.72"/>
</a>
</g>
<g id="a_edge_2_play_37654ab9_task_82eeb3f2-label"><a xlink:title="2 [when: not redis_port is defined]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#af1d9c" dy="-0.2%"><textPath xlink:href="#path_edge_2_play_37654ab9_task_82eeb3f2" startOffset="545.169763484181">2 [when: not redis_port is defined]</textPath></text>
</a>
</g>
</g>
<!-- task_2a3c8db2 -->
<g id="task_2a3c8db2" class="node">
<title>task_2a3c8db2</title>
<g id="a_task_2a3c8db2"><a xlink:href="/Users/vonng/pigsty/redis.yml" xlink:title="Make sure redis data dir exists">
<polygon fill="none" stroke="#af1d9c" points="1404.03,-618.54 1404.03,-633.46 1314.28,-644 1187.34,-644 1097.59,-633.46 1097.59,-618.54 1187.34,-608 1314.28,-608 1404.03,-618.54"/>
<text text-anchor="middle" x="1250.81" y="-622.3" font-family="Times,serif" font-size="14.00">[task] Make sure redis data dir exists</text>
</a>
</g>
</g>
<!-- play_37654ab9&#45;&gt;task_2a3c8db2 -->
<g id="edge_3_play_37654ab9_task_2a3c8db2" class="edge">
<title>play_37654ab9-&gt;task_2a3c8db2</title>
<g id="a_edge_3_play_37654ab9_task_2a3c8db2"><a xlink:title="3 [when: not redis_port is defined]">
<path fill="none" stroke="#af1d9c" d="M443.49,-563.07C463.52,-570.57 487.8,-578.55 510.39,-583 706.17,-621.6 936.3,-629.2 1087.2,-629.2" id="path_edge_3_play_37654ab9_task_2a3c8db2"/>
<polygon fill="#af1d9c" stroke="#af1d9c" points="1087.48,-632.7 1097.47,-629.19 1087.47,-625.7 1087.48,-632.7"/>
</a>
</g>
<g id="a_edge_3_play_37654ab9_task_2a3c8db2-label"><a xlink:title="3 [when: not redis_port is defined]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#af1d9c" dy="-0.2%"><textPath xlink:href="#path_edge_3_play_37654ab9_task_2a3c8db2" startOffset="458.53247949225556">3 [when: not redis_port is defined]</textPath></text>
</a>
</g>
</g>
<!-- task_9d2539ea -->
<g id="task_9d2539ea" class="node">
<title>task_9d2539ea</title>
<g id="a_task_9d2539ea"><a xlink:href="/Users/vonng/pigsty/redis.yml" xlink:title="Config /etc/default/redis_exporter">
<polygon fill="none" stroke="#af1d9c" points="1415.95,-564.54 1415.95,-579.46 1319.22,-590 1182.41,-590 1085.67,-579.46 1085.67,-564.54 1182.41,-554 1319.22,-554 1415.95,-564.54"/>
<text text-anchor="middle" x="1250.81" y="-568.3" font-family="Times,serif" font-size="14.00">[task] Config /etc/default/redis_exporter</text>
</a>
</g>
</g>
<!-- play_37654ab9&#45;&gt;task_9d2539ea -->
<g id="edge_4_play_37654ab9_task_9d2539ea" class="edge">
<title>play_37654ab9-&gt;task_9d2539ea</title>
<g id="a_edge_4_play_37654ab9_task_9d2539ea"><a xlink:title="4 [when: not redis_port is defined]">
<path fill="none" stroke="#af1d9c" d="M464.47,-547.05C593.3,-551.14 886.08,-560.45 1075.49,-566.46" id="path_edge_4_play_37654ab9_task_9d2539ea"/>
<polygon fill="#af1d9c" stroke="#af1d9c" points="1075.45,-569.96 1085.56,-566.78 1075.68,-562.97 1075.45,-569.96"/>
</a>
</g>
<g id="a_edge_4_play_37654ab9_task_9d2539ea-label"><a xlink:title="4 [when: not redis_port is defined]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#af1d9c" dy="-0.2%"><textPath xlink:href="#path_edge_4_play_37654ab9_task_9d2539ea" startOffset="429.6094447051468">4 [when: not redis_port is defined]</textPath></text>
</a>
</g>
</g>
<!-- task_4716f750 -->
<g id="task_4716f750" class="node">
<title>task_4716f750</title>
<g id="a_task_4716f750"><a xlink:href="/Users/vonng/pigsty/redis.yml" xlink:title="Config redis_exporter service unit">
<polygon fill="none" stroke="#af1d9c" points="1417.77,-510.54 1417.77,-525.46 1319.97,-536 1181.66,-536 1083.86,-525.46 1083.86,-510.54 1181.66,-500 1319.97,-500 1417.77,-510.54"/>
<text text-anchor="middle" x="1250.81" y="-514.3" font-family="Times,serif" font-size="14.00">[task] Config redis_exporter service unit</text>
</a>
</g>
</g>
<!-- play_37654ab9&#45;&gt;task_4716f750 -->
<g id="edge_5_play_37654ab9_task_4716f750" class="edge">
<title>play_37654ab9-&gt;task_4716f750</title>
<g id="a_edge_5_play_37654ab9_task_4716f750"><a xlink:title="5 [when: not redis_port is defined]">
<path fill="none" stroke="#af1d9c" d="M464.59,-534.21C479.59,-532.1 495.51,-530.18 510.39,-529 702.59,-513.72 923.74,-512.58 1073.74,-514.25" id="path_edge_5_play_37654ab9_task_4716f750"/>
<polygon fill="#af1d9c" stroke="#af1d9c" points="1073.93,-517.75 1083.97,-514.37 1074.01,-510.75 1073.93,-517.75"/>
</a>
</g>
<g id="a_edge_5_play_37654ab9_task_4716f750-label"><a xlink:title="5 [when: not redis_port is defined]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#af1d9c" dy="-0.2%"><textPath xlink:href="#path_edge_5_play_37654ab9_task_4716f750" startOffset="428.4660751442877">5 [when: not redis_port is defined]</textPath></text>
</a>
</g>
</g>
<!-- task_1c340dd7 -->
<g id="task_1c340dd7" class="node">
<title>task_1c340dd7</title>
<g id="a_task_1c340dd7"><a xlink:href="/Users/vonng/pigsty/redis.yml" xlink:title="Launch redis_exporter systemd service">
<polygon fill="none" stroke="#af1d9c" points="1436.76,-456.54 1436.76,-471.46 1327.83,-482 1173.79,-482 1064.87,-471.46 1064.87,-456.54 1173.79,-446 1327.83,-446 1436.76,-456.54"/>
<text text-anchor="middle" x="1250.81" y="-460.3" font-family="Times,serif" font-size="14.00">[task] Launch redis_exporter systemd service</text>
</a>
</g>
</g>
<!-- play_37654ab9&#45;&gt;task_1c340dd7 -->
<g id="edge_6_play_37654ab9_task_1c340dd7" class="edge">
<title>play_37654ab9-&gt;task_1c340dd7</title>
<g id="a_edge_6_play_37654ab9_task_1c340dd7"><a xlink:title="6 [when: redis_exporter_enabled|bool and not redis_port is defined]">
<path fill="none" stroke="#af1d9c" d="M430.61,-526.84C452.15,-515.12 482.05,-500.83 510.39,-494 705.59,-446.96 938.04,-446.17 1089.5,-452.7" id="path_edge_6_play_37654ab9_task_1c340dd7"/>
<polygon fill="#af1d9c" stroke="#af1d9c" points="1089.66,-456.21 1099.81,-453.16 1089.98,-449.22 1089.66,-456.21"/>
</a>
</g>
<g id="a_edge_6_play_37654ab9_task_1c340dd7-label"><a xlink:title="6 [when: redis_exporter_enabled|bool and not redis_port is defined]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#af1d9c" dy="-0.2%"><textPath xlink:href="#path_edge_6_play_37654ab9_task_1c340dd7" startOffset="441.3229376523794">6 [when: redis_exporter_enabled|bool and not redis_port is defined]</textPath></text>
</a>
</g>
</g>
<!-- task_92587506 -->
<g id="task_92587506" class="node">
<title>task_92587506</title>
<g id="a_task_92587506"><a xlink:href="/Users/vonng/pigsty/redis.yml" xlink:title="Wait for redis_exporter online">
<polygon fill="none" stroke="#af1d9c" points="1401.81,-402.54 1401.81,-417.46 1313.36,-428 1188.26,-428 1099.81,-417.46 1099.81,-402.54 1188.26,-392 1313.36,-392 1401.81,-402.54"/>
<text text-anchor="middle" x="1250.81" y="-406.3" font-family="Times,serif" font-size="14.00">[task] Wait for redis_exporter online</text>
</a>
</g>
</g>
<!-- play_37654ab9&#45;&gt;task_92587506 -->
<g id="edge_7_play_37654ab9_task_92587506" class="edge">
<title>play_37654ab9-&gt;task_92587506</title>
<g id="a_edge_7_play_37654ab9_task_92587506"><a xlink:title="7 [when: redis_exporter_enabled|bool and not redis_port is defined]">
<path fill="none" stroke="#af1d9c" d="M410.7,-526.83C427.9,-499.9 464.3,-450.37 510.39,-430 612.1,-385.04 914.61,-391.76 1099.68,-400.81" id="path_edge_7_play_37654ab9_task_92587506"/>
<polygon fill="#af1d9c" stroke="#af1d9c" points="1099.61,-404.31 1109.77,-401.31 1099.96,-397.32 1099.61,-404.31"/>
</a>
</g>
<g id="a_edge_7_play_37654ab9_task_92587506-label"><a xlink:title="7 [when: redis_exporter_enabled|bool and not redis_port is defined]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#af1d9c" dy="-0.2%"><textPath xlink:href="#path_edge_7_play_37654ab9_task_92587506" startOffset="490.6588206462967">7 [when: redis_exporter_enabled|bool and not redis_port is defined]</textPath></text>
</a>
</g>
</g>
<!-- task_c79e54ab -->
<g id="task_c79e54ab" class="node">
<title>task_c79e54ab</title>
<g id="a_task_c79e54ab"><a xlink:href="/Users/vonng/pigsty/redis.yml" xlink:title="Assert redis configured properly">
<polygon fill="none" stroke="#02ca03" points="1410.7,-348.54 1410.7,-363.46 1317.04,-374 1184.59,-374 1090.93,-363.46 1090.93,-348.54 1184.59,-338 1317.04,-338 1410.7,-348.54"/>
<text text-anchor="middle" x="1250.81" y="-352.3" font-family="Times,serif" font-size="14.00">[task] Assert redis configured properly</text>
</a>
</g>
</g>
<!-- play_b0b1a09d&#45;&gt;task_c79e54ab -->
<g id="edge_1_play_b0b1a09d_task_c79e54ab" class="edge">
<title>play_b0b1a09d-&gt;task_c79e54ab</title>
<g id="a_edge_1_play_b0b1a09d_task_c79e54ab"><a xlink:title="1 ">
<path fill="none" stroke="#02ca03" d="M492.62,-318.8C498.62,-319.62 504.59,-320.37 510.39,-321 705.37,-342.3 930.67,-350.64 1080.84,-353.91" id="path_edge_1_play_b0b1a09d_task_c79e54ab"/>
<polygon fill="#02ca03" stroke="#02ca03" points="1081,-357.41 1091.07,-354.12 1081.15,-350.41 1081,-357.41"/>
</a>
</g>
<g id="a_edge_1_play_b0b1a09d_task_c79e54ab-label"><a xlink:title="1 ">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#02ca03" dy="-0.2%"><textPath xlink:href="#path_edge_1_play_b0b1a09d_task_c79e54ab" startOffset="445.99871808804846">1 </textPath></text>
</a>
</g>
</g>
<!-- role_415fbc62 -->
<g id="role_415fbc62" class="node">
<title>role_415fbc62</title>
<g id="a_role_415fbc62"><a xlink:href="/Users/vonng/pigsty/redis.yml" xlink:title="redis">
<ellipse fill="none" stroke="#02ca03" cx="1250.81" cy="-302" rx="50.09" ry="18"/>
<text text-anchor="middle" x="1250.81" y="-298.3" font-family="Times,serif" font-size="14.00">[role] redis</text>
</a>
</g>
</g>
<!-- play_b0b1a09d&#45;&gt;role_415fbc62 -->
<g id="edge_2_play_b0b1a09d_role_415fbc62" class="edge">
<title>play_b0b1a09d-&gt;role_415fbc62</title>
<g id="a_edge_2_play_b0b1a09d_role_415fbc62"><a xlink:title="2 [when: redis_port is not defined or (redis_port is defined and item.key|int == redis_port|int)]">
<path fill="none" stroke="#02ca03" d="M492.47,-302C667.88,-302 1044.17,-302 1190.18,-302" id="path_edge_2_play_b0b1a09d_role_415fbc62"/>
<polygon fill="#02ca03" stroke="#02ca03" points="1190.29,-305.5 1200.29,-302 1190.29,-298.5 1190.29,-305.5"/>
</a>
</g>
<g id="a_edge_2_play_b0b1a09d_role_415fbc62-label"><a xlink:title="2 [when: redis_port is not defined or (redis_port is defined and item.key|int == redis_port|int)]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#02ca03" dy="-0.2%"><textPath xlink:href="#path_edge_2_play_b0b1a09d_role_415fbc62" startOffset="433.2596">2 [when: redis_port is not defined or (redis_port is defined and item.key|int == redis_port|int)]</textPath></text>
</a>
</g>
</g>
<!-- task_15fa295d -->
<g id="task_15fa295d" class="node">
<title>task_15fa295d</title>
<g id="a_task_15fa295d"><a xlink:href="/Users/vonng/pigsty/redis.yml" xlink:title="Register redis exporter as prometheus target">
<polygon fill="none" stroke="#02ca03" points="1456.15,-240.54 1456.15,-255.46 1335.87,-266 1165.76,-266 1045.47,-255.46 1045.47,-240.54 1165.76,-230 1335.87,-230 1456.15,-240.54"/>
<text text-anchor="middle" x="1250.81" y="-244.3" font-family="Times,serif" font-size="14.00">[task] Register redis exporter as prometheus target</text>
</a>
</g>
</g>
<!-- play_b0b1a09d&#45;&gt;task_15fa295d -->
<g id="edge_3_play_b0b1a09d_task_15fa295d" class="edge">
<title>play_b0b1a09d-&gt;task_15fa295d</title>
<g id="a_edge_3_play_b0b1a09d_task_15fa295d"><a xlink:title="3 ">
<path fill="none" stroke="#02ca03" d="M492.62,-285.2C498.62,-284.38 504.59,-283.63 510.39,-283 686.48,-263.77 887.3,-255.1 1035.18,-251.19" id="path_edge_3_play_b0b1a09d_task_15fa295d"/>
<polygon fill="#02ca03" stroke="#02ca03" points="1035.38,-254.69 1045.28,-250.93 1035.2,-247.69 1035.38,-254.69"/>
</a>
</g>
<g id="a_edge_3_play_b0b1a09d_task_15fa295d-label"><a xlink:title="3 ">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#02ca03" dy="-0.2%"><textPath xlink:href="#path_edge_3_play_b0b1a09d_task_15fa295d" startOffset="411.28688795959306">3 </textPath></text>
</a>
</g>
</g>
<!-- task_7696d06e -->
<g id="task_7696d06e" class="node">
<title>task_7696d06e</title>
<g id="a_task_7696d06e"><a xlink:href="/Users/vonng/pigsty/redis.yml" xlink:title="Skip for non redis native cluster">
<polygon fill="none" stroke="#bc7410" points="1409.79,-186.54 1409.79,-201.46 1316.66,-212 1184.96,-212 1091.83,-201.46 1091.83,-186.54 1184.96,-176 1316.66,-176 1409.79,-186.54"/>
<text text-anchor="middle" x="1250.81" y="-190.3" font-family="Times,serif" font-size="14.00">[task] Skip for non redis native cluster</text>
</a>
</g>
</g>
<!-- play_65cf9535&#45;&gt;task_7696d06e -->
<g id="edge_1_play_65cf9535_task_7696d06e" class="edge">
<title>play_65cf9535-&gt;task_7696d06e</title>
<g id="a_edge_1_play_65cf9535_task_7696d06e"><a xlink:title="1 [when: redis_port is defined or redis_mode != 'cluster']">
<path fill="none" stroke="#bc7410" d="M479.09,-194C615.79,-194 898.89,-194 1081.3,-194" id="path_edge_1_play_65cf9535_task_7696d06e"/>
<polygon fill="#bc7410" stroke="#bc7410" points="1081.53,-197.5 1091.53,-194 1081.53,-190.5 1081.53,-197.5"/>
</a>
</g>
<g id="a_edge_1_play_65cf9535_task_7696d06e-label"><a xlink:title="1 [when: redis_port is defined or redis_mode != 'cluster']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#bc7410" dy="-0.2%"><textPath xlink:href="#path_edge_1_play_65cf9535_task_7696d06e" startOffset="399.67960000000005">1 [when: redis_port is defined or redis_mode != 'cluster']</textPath></text>
</a>
</g>
</g>
<!-- block_2ef13097 -->
<g id="block_2ef13097" class="node">
<title>block_2ef13097</title>
<g id="a_block_2ef13097"><a xlink:href="/Users/vonng/pigsty/redis.yml" xlink:title="Execute redis cluster join">
<polygon fill="none" stroke="#bc7410" points="1349.31,-125 1152.31,-125 1152.31,-89 1349.31,-89 1349.31,-125"/>
<text text-anchor="middle" x="1250.81" y="-103.3" font-family="Times,serif" font-size="14.00">[block] Execute redis cluster join</text>
</a>
</g>
<links><link target="task_637475bf" edge="edge_1_block_2ef13097_task_637475bf"/><link target="task_c0d72d0e" edge="edge_2_block_2ef13097_task_c0d72d0e"/><link target="task_6f45986f" edge="edge_3_block_2ef13097_task_6f45986f"/></links></g>
<!-- play_65cf9535&#45;&gt;block_2ef13097 -->
<g id="edge_2_play_65cf9535_block_2ef13097" class="edge">
<title>play_65cf9535-&gt;block_2ef13097</title>
<g id="a_edge_2_play_65cf9535_block_2ef13097"><a xlink:title="2">
<path fill="none" stroke="#bc7410" d="M479.15,-179.6C489.64,-177.92 500.26,-176.33 510.39,-175 734.12,-145.52 997.61,-124.56 1141.88,-114.26" id="path_edge_2_play_65cf9535_block_2ef13097"/>
<polygon fill="#bc7410" stroke="#bc7410" points="1142.33,-117.73 1152.05,-113.53 1141.83,-110.75 1142.33,-117.73"/>
</a>
</g>
<g id="a_edge_2_play_65cf9535_block_2ef13097-label"><a xlink:title="2">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#bc7410" dy="-0.2%"><textPath xlink:href="#path_edge_2_play_65cf9535_block_2ef13097" startOffset="505.21184185636577">2</textPath></text>
</a>
</g>
</g>
<!-- task_6f45986f -->
<g id="task_6f45986f" class="node">
<title>task_6f45986f</title>
<g id="a_task_6f45986f"><a xlink:href="/Users/vonng/pigsty/redis.yml" xlink:title="Join redis clusters">
<polygon fill="none" stroke="#bc7410" points="1899.11,-26.54 1899.11,-41.46 1852.01,-52 1785.41,-52 1738.31,-41.46 1738.31,-26.54 1785.41,-16 1852.01,-16 1899.11,-26.54"/>
<text text-anchor="middle" x="1818.71" y="-30.3" font-family="Times,serif" font-size="14.00">Join redis clusters</text>
</a>
</g>
</g>
<!-- block_2ef13097&#45;&gt;task_6f45986f -->
<g id="edge_3_block_2ef13097_task_6f45986f" class="edge">
<title>block_2ef13097-&gt;task_6f45986f</title>
<g id="a_edge_3_block_2ef13097_task_6f45986f"><a xlink:title="3 [when: redis_port is not defined]">
<path fill="none" stroke="#bc7410" d="M1349.43,-91.84C1388.24,-85.99 1433.31,-79.42 1474.23,-74 1561.59,-62.44 1661.69,-50.98 1731.2,-43.32" id="path_edge_3_block_2ef13097_task_6f45986f"/>
<polygon fill="#bc7410" stroke="#bc7410" points="1731.67,-46.78 1741.23,-42.21 1730.91,-39.83 1731.67,-46.78"/>
</a>
</g>
<g id="a_edge_3_block_2ef13097_task_6f45986f-label"><a xlink:title="3 [when: redis_port is not defined]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#bc7410" dy="-0.2%"><textPath xlink:href="#path_edge_3_block_2ef13097_task_6f45986f" startOffset="257.50120378841063">3 [when: redis_port is not defined]</textPath></text>
</a>
</g>
</g>
<!-- task_c0d72d0e -->
<g id="task_c0d72d0e" class="node">
<title>task_c0d72d0e</title>
<g id="a_task_c0d72d0e"><a xlink:href="/Users/vonng/pigsty/redis.yml" xlink:title="Render redis cluster join script">
<polygon fill="none" stroke="#bc7410" points="1948.09,-80.54 1948.09,-95.46 1872.3,-106 1765.12,-106 1689.32,-95.46 1689.32,-80.54 1765.12,-70 1872.3,-70 1948.09,-80.54"/>
<text text-anchor="middle" x="1818.71" y="-84.3" font-family="Times,serif" font-size="14.00">Render redis cluster join script</text>
</a>
</g>
</g>
<!-- block_2ef13097&#45;&gt;task_c0d72d0e -->
<g id="edge_2_block_2ef13097_task_c0d72d0e" class="edge">
<title>block_2ef13097-&gt;task_c0d72d0e</title>
<g id="a_edge_2_block_2ef13097_task_c0d72d0e"><a xlink:title="2 [when: redis_port is not defined]">
<path fill="none" stroke="#bc7410" d="M1349.42,-103.72C1440.37,-100.67 1576.95,-96.08 1679.17,-92.65" id="path_edge_2_block_2ef13097_task_c0d72d0e"/>
<polygon fill="#bc7410" stroke="#bc7410" points="1679.39,-96.15 1689.27,-92.31 1679.16,-89.15 1679.39,-96.15"/>
</a>
</g>
<g id="a_edge_2_block_2ef13097_task_c0d72d0e-label"><a xlink:title="2 [when: redis_port is not defined]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#bc7410" dy="-0.2%"><textPath xlink:href="#path_edge_2_block_2ef13097_task_c0d72d0e" startOffset="215.75117954285156">2 [when: redis_port is not defined]</textPath></text>
</a>
</g>
</g>
<!-- task_637475bf -->
<g id="task_637475bf" class="node">
<title>task_637475bf</title>
<g id="a_task_637475bf"><a xlink:href="/Users/vonng/pigsty/redis.yml" xlink:title="Fetch redis cluster memberships">
<polygon fill="none" stroke="#bc7410" points="1955.16,-134.54 1955.16,-149.46 1875.23,-160 1762.19,-160 1682.25,-149.46 1682.25,-134.54 1762.19,-124 1875.23,-124 1955.16,-134.54"/>
<text text-anchor="middle" x="1818.71" y="-138.3" font-family="Times,serif" font-size="14.00">Fetch redis cluster memberships</text>
</a>
</g>
</g>
<!-- block_2ef13097&#45;&gt;task_637475bf -->
<g id="edge_1_block_2ef13097_task_637475bf" class="edge">
<title>block_2ef13097-&gt;task_637475bf</title>
<g id="a_edge_1_block_2ef13097_task_637475bf"><a xlink:title="1 [when: redis_port is not defined]">
<path fill="none" stroke="#bc7410" d="M1349.42,-113.04C1439.68,-118.62 1574.89,-126.98 1676.85,-133.29" id="path_edge_1_block_2ef13097_task_637475bf"/>
<polygon fill="#bc7410" stroke="#bc7410" points="1676.72,-136.79 1686.92,-133.91 1677.15,-129.8 1676.72,-136.79"/>
</a>
</g>
<g id="a_edge_1_block_2ef13097_task_637475bf-label"><a xlink:title="1 [when: redis_port is not defined]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#bc7410" dy="-0.2%"><textPath xlink:href="#path_edge_1_block_2ef13097_task_637475bf" startOffset="214.32224527672113">1 [when: redis_port is not defined]</textPath></text>
</a>
</g>
</g>
</g>
</svg>