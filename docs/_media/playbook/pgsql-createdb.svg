<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 6.0.2 (20221011.1828)
 --><!-- Pages: 1 --><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="2518pt" height="783pt" viewBox="0.00 0.00 2518.32 783.31" id="svg">
<script type="text/javascript" href="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js" id="jquery"/><script type="text/javascript" id="my_javascript"><![CDATA[/**
 * This file contains the functions responsible to highlight the plays, roles and tasks when rendering the SVG file in a browser
 * or any SVG reader that support Javascript.
 */

/**
 * The name of the CSS class for highlighted elements
 * @type {string}
 */
const HIGHLIGHT_CLASS = "highlight";

/**
 * The current selected element on the graph
 * @type {null}
 */
let currentSelectedElement = null;

/**
 * Highlight the linked nodes of the given root element
 * @param {Element} parentElement
 * @param {string[]} visitedElements
 */
function highlightLinkedNodes(parentElement, visitedElements = []) {
    $(parentElement).find('link').each(function (index, element) {
        const linkedElementId = $(element).attr('target');
        const edgeId = $(element).attr('edge');

        const currentElement = $(`#${linkedElementId}`);
        currentElement.addClass(HIGHLIGHT_CLASS);

        // Highlight the edge point to the target
        $(`#${edgeId}`).addClass(HIGHLIGHT_CLASS);

        if (!visitedElements.includes(linkedElementId)) {
            visitedElements.push(linkedElementId);
            // Recursively highlight
            highlightLinkedNodes(currentElement, visitedElements);
        }
    })
}


/**
 * Unhighlight the linked nodes of the given root element
 * @param {Element} parentElement
 * @param {string[]} visitedElements
 * @param {boolean} isHover True when we are coming from a mouseleave event. In that case, we should not unhighlight if
 * the parentElement is the current selected element
 */
function unHighlightLinkedNodes(parentElement, visitedElements = [], isHover) {
    const currentSelectedElementId = $(currentSelectedElement).attr('id');
    // Do not unhighlight the current selected element
    if ($(parentElement).attr('id') !== currentSelectedElementId || !isHover) {

        $(parentElement).find('link').each(function (index, element) {
            const linkedElementId = $(element).attr('target');
            const edgeId = $(element).attr('edge');

            const linkedElement = $(`#${linkedElementId}`);

            if (linkedElement.attr('id') !== currentSelectedElementId) {
                linkedElement.removeClass(HIGHLIGHT_CLASS);

                // Unhighlight the edge point to the target
                $(`#${edgeId}`).removeClass(HIGHLIGHT_CLASS);

                if (!visitedElements.includes(linkedElementId)) {
                    visitedElements.push(linkedElementId);
                    // Recursively unhighlight
                    unHighlightLinkedNodes(linkedElement, visitedElements, isHover);
                }
            }

        })
    }

}

/**
 * Hover handler for mouseenter event
 * @param {Event} event
 */
function hoverMouseEnter(event) {
    highlightLinkedNodes(event.currentTarget, []);
}

/**
 * Hover handler for mouseleave event
 * @param {Event} event
 */
function hoverMouseLeave(event) {
    unHighlightLinkedNodes(event.currentTarget, [], true);
}

/**
 * Handler when clicking on some elements
 * @param {Event} event
 */
function clickOnElement(event) {
    const newClickedElement = $(event.currentTarget);

    event.preventDefault(); // Disable the default click behavior since we override it here

    if (newClickedElement.attr('id') === $(currentSelectedElement).attr('id')) { // clicking again on the same element
        newClickedElement.removeClass(HIGHLIGHT_CLASS);
        unHighlightLinkedNodes(currentSelectedElement, [], false);
        currentSelectedElement = null;
    } else { // clicking on a different node

        // Remove highlight from all the nodes linked to the current selected node
        unHighlightLinkedNodes(currentSelectedElement, [], false);
        if (currentSelectedElement) {
            currentSelectedElement.removeClass(HIGHLIGHT_CLASS);
        }

        newClickedElement.addClass(HIGHLIGHT_CLASS);
        highlightLinkedNodes(newClickedElement, []);
        currentSelectedElement = newClickedElement;
    }
}

/**
 * Handler when double clicking on some elements
 * @param {Event} event
 */
function dblClickElement(event) {
    const newElementDlbClicked = event.currentTarget;
    const links = $(newElementDlbClicked).find("a[xlink\\:href]");

    if (links.length > 0) {
        document.location = $(links[0]).attr("xlink:href");
    } else {
        console.log("No links found on this element");
    }
}


$("#svg").ready(function () {
    let playbooks = $("g[id^=playbook_]");
    let plays = $("g[id^=play_]");
    let roles = $("g[id^=role_]");
    let blocks = $("g[id^=block_]");
    let tasks = $("g[id^=pre_task_], g[id^=task_], g[id^=post_task_]");

    playbooks.hover(hoverMouseEnter, hoverMouseLeave);
    playbooks.click(clickOnElement);
    playbooks.dblclick(dblClickElement);

    // Set hover and click events on the plays
    plays.hover(hoverMouseEnter, hoverMouseLeave);
    plays.click(clickOnElement);
    plays.dblclick(dblClickElement);

    // Set hover and click events on the roles
    roles.hover(hoverMouseEnter, hoverMouseLeave);
    roles.click(clickOnElement);
    roles.dblclick(dblClickElement);

    // Set hover and click events on the blocks
    blocks.hover(hoverMouseEnter, hoverMouseLeave);
    blocks.click(clickOnElement);
    blocks.dblclick(dblClickElement);

    // Set hover and click events on the tasks
    tasks.hover(hoverMouseEnter, hoverMouseLeave);
    tasks.click(clickOnElement);
    tasks.dblclick(dblClickElement);

});
]]></script><style type="text/css" id="my_css"><![CDATA[/**
 Hover on nodes, edges, path and polygon
 */
.node:hover, .edge:hover, path:hover, path + polygon:hover {
    cursor: pointer;
    stroke-width: 3;
    font-weight: bolder;
}

/**
 Manually added class by the script highlight-hover.js when hovering on plays and roles
 */
.highlight {
    cursor: pointer;
    stroke-width: 3;
    font-weight: bolder;
}
]]></style><g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 779.31)">
<polygon fill="white" stroke="none" points="-4,4 -4,-779.31 2514.32,-779.31 2514.32,4 -4,4"/>
<g id="clust2" class="cluster">
<title>cluster_block_850a3539</title>
<polygon fill="none" stroke="black" points="1375.28,-553.31 1375.28,-767.31 2377.81,-767.31 2377.81,-553.31 1375.28,-553.31"/>
</g>
<g id="clust3" class="cluster">
<title>cluster_block_020061f5</title>
<polygon fill="none" stroke="black" points="1304.28,-223.31 1304.28,-545.31 2502.32,-545.31 2502.32,-223.31 1304.28,-223.31"/>
</g>
<!-- pgsql&#45;createdb.yml -->
<g id="playbook_72d82bde" class="node">
<title>pgsql-createdb.yml</title>
<g id="a_playbook_72d82bde"><a xlink:href="/Users/vonng/pigsty/pgsql-createdb.yml" xlink:title="pgsql-createdb.yml">
<ellipse fill="none" stroke="black" stroke-dasharray="1,5" cx="79.29" cy="-170.31" rx="79.09" ry="18"/>
<text text-anchor="middle" x="79.29" y="-166.61" font-family="Times,serif" font-size="14.00">pgsql-createdb.yml</text>
</a>
</g>
<links><link target="play_7b27505a" edge="edge_1_playbook_72d82bde_play_7b27505a"/></links></g>
<!-- play_7b27505a -->
<g id="play_7b27505a" class="node">
<title>play_7b27505a</title>
<g id="a_play_7b27505a"><a xlink:href="/Users/vonng/pigsty/pgsql-createdb.yml" xlink:title="10.10.10.10,10.10.10.11,10.10.10.12,10.10.10.13">
<polygon fill="#56bd0f" stroke="#56bd0f" points="645.59,-188.31 417.59,-188.31 417.59,-152.31 645.59,-152.31 645.59,-188.31"/>
<text text-anchor="middle" x="531.59" y="-166.61" font-family="Times,serif" font-size="14.00" fill="#ffffff">Play: Create new postgres database (4)</text>
</a>
</g>
<links><link target="block_850a3539" edge="edge_1_play_7b27505a_block_850a3539"/><link target="block_020061f5" edge="edge_2_play_7b27505a_block_020061f5"/><link target="task_e283ac68" edge="edge_3_play_7b27505a_task_e283ac68"/><link target="task_ff5f7148" edge="edge_4_play_7b27505a_task_ff5f7148"/><link target="task_877c73c7" edge="edge_5_play_7b27505a_task_877c73c7"/><link target="task_19b2101b" edge="edge_6_play_7b27505a_task_19b2101b"/></links></g>
<!-- pgsql&#45;createdb.yml&#45;&gt;play_7b27505a -->
<g id="edge_playbook_72d82bde_play_7b27505a" class="edge">
<title>pgsql-createdb.yml-&gt;play_7b27505a</title>
<g id="a_edge_playbook_72d82bde_play_7b27505a"><a xlink:title="1 Play: Create new postgres database (4)">
<path fill="none" stroke="#56bd0f" d="M158.73,-170.31C227.23,-170.31 327.84,-170.31 407.13,-170.31" id="path_edge_playbook_72d82bde_play_7b27505a"/>
<polygon fill="#56bd0f" stroke="#56bd0f" points="407.19,-173.81 417.19,-170.31 407.19,-166.81 407.19,-173.81"/>
</a>
</g>
<g id="a_edge_playbook_72d82bde_play_7b27505a-label"><a xlink:title="1 Play: Create new postgres database (4)">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#56bd0f" dy="-0.2%"><textPath xlink:href="#path_edge_playbook_72d82bde_play_7b27505a" startOffset="148.78400000000002">1 Play: Create new postgres database (4)</textPath></text>
</a>
</g>
</g>
<!-- block_850a3539 -->
<g id="block_850a3539" class="node">
<title>block_850a3539</title>
<g id="a_block_850a3539"><a xlink:href="/Users/vonng/pigsty/pgsql-createdb.yml" xlink:title="Preflight">
<polygon fill="none" stroke="#56bd0f" points="1490.28,-651.31 1383.28,-651.31 1383.28,-615.31 1490.28,-615.31 1490.28,-651.31"/>
<text text-anchor="middle" x="1436.78" y="-629.61" font-family="Times,serif" font-size="14.00">[block] Preflight</text>
</a>
</g>
<links><link target="task_f3853b1e" edge="edge_1_block_850a3539_task_f3853b1e"/><link target="task_8ca91d26" edge="edge_2_block_850a3539_task_8ca91d26"/><link target="task_54aabcf6" edge="edge_3_block_850a3539_task_54aabcf6"/><link target="task_e671304f" edge="edge_4_block_850a3539_task_e671304f"/></links></g>
<!-- play_7b27505a&#45;&gt;block_850a3539 -->
<g id="edge_1_play_7b27505a_block_850a3539" class="edge">
<title>play_7b27505a-&gt;block_850a3539</title>
<g id="a_edge_1_play_7b27505a_block_850a3539"><a xlink:title="1">
<path fill="none" stroke="#56bd0f" d="M541.99,-188.34C560.71,-222.59 605.84,-297.45 663.59,-340.31 893.31,-510.79 1233.97,-593.5 1373.13,-621.71" id="path_edge_1_play_7b27505a_block_850a3539"/>
<polygon fill="#56bd0f" stroke="#56bd0f" points="1372.7,-625.19 1383.19,-623.72 1374.08,-618.33 1372.7,-625.19"/>
</a>
</g>
<g id="a_edge_1_play_7b27505a_block_850a3539-label"><a xlink:title="1">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#56bd0f" dy="-0.2%"><textPath xlink:href="#path_edge_1_play_7b27505a_block_850a3539" startOffset="732.2768607535924">1</textPath></text>
</a>
</g>
</g>
<!-- block_020061f5 -->
<g id="block_020061f5" class="node">
<title>block_020061f5</title>
<g id="a_block_020061f5"><a xlink:href="/Users/vonng/pigsty/roles/postgres/tasks/createdb.yml" xlink:title="Create database on cluster primary">
<polygon fill="none" stroke="#56bd0f" points="1561.28,-375.31 1312.28,-375.31 1312.28,-339.31 1561.28,-339.31 1561.28,-375.31"/>
<text text-anchor="middle" x="1436.78" y="-353.61" font-family="Times,serif" font-size="14.00">[block] Create database on cluster primary</text>
</a>
</g>
<links><link target="task_9896d340" edge="edge_1_block_020061f5_task_9896d340"/><link target="task_d342d66d" edge="edge_2_block_020061f5_task_d342d66d"/><link target="task_d7e1d4d6" edge="edge_3_block_020061f5_task_d7e1d4d6"/><link target="task_68433023" edge="edge_4_block_020061f5_task_68433023"/><link target="task_fd73085d" edge="edge_5_block_020061f5_task_fd73085d"/><link target="task_f2f48c16" edge="edge_6_block_020061f5_task_f2f48c16"/></links></g>
<!-- play_7b27505a&#45;&gt;block_020061f5 -->
<g id="edge_2_play_7b27505a_block_020061f5" class="edge">
<title>play_7b27505a-&gt;block_020061f5</title>
<g id="a_edge_2_play_7b27505a_block_020061f5"><a xlink:title="2">
<path fill="none" stroke="#56bd0f" d="M587.03,-188.38C610.43,-195.77 638.19,-204.03 663.59,-210.31 889.16,-266.04 1156.25,-312.67 1309.86,-337.64" id="path_edge_2_play_7b27505a_block_020061f5"/>
<polygon fill="#56bd0f" stroke="#56bd0f" points="1309.38,-341.11 1319.81,-339.26 1310.5,-334.2 1309.38,-341.11"/>
</a>
</g>
<g id="a_edge_2_play_7b27505a_block_020061f5-label"><a xlink:title="2">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#56bd0f" dy="-0.2%"><textPath xlink:href="#path_edge_2_play_7b27505a_block_020061f5" startOffset="560.2680912558498">2</textPath></text>
</a>
</g>
</g>
<!-- task_e283ac68 -->
<g id="task_e283ac68" class="node">
<title>task_e283ac68</title>
<g id="a_task_e283ac68"><a xlink:href="/Users/vonng/pigsty/roles/postgres/tasks/createdb.yml" xlink:title="Add biz database to pgbouncer">
<polygon fill="none" stroke="#56bd0f" points="1590.91,-189.85 1590.91,-204.76 1500.63,-215.31 1372.94,-215.31 1282.66,-204.76 1282.66,-189.85 1372.94,-179.31 1500.63,-179.31 1590.91,-189.85"/>
<text text-anchor="middle" x="1436.78" y="-193.61" font-family="Times,serif" font-size="14.00">[task] Add biz database to pgbouncer</text>
</a>
</g>
</g>
<!-- play_7b27505a&#45;&gt;task_e283ac68 -->
<g id="edge_3_play_7b27505a_task_e283ac68" class="edge">
<title>play_7b27505a-&gt;task_e283ac68</title>
<g id="a_edge_3_play_7b27505a_task_e283ac68"><a xlink:title="3 [when: pgbouncer_enabled|bool]">
<path fill="none" stroke="#56bd0f" d="M645.61,-173.69C803.56,-178.41 1091.26,-187.01 1272.5,-192.43" id="path_edge_3_play_7b27505a_task_e283ac68"/>
<polygon fill="#56bd0f" stroke="#56bd0f" points="1272.56,-195.93 1282.66,-192.73 1272.77,-188.93 1272.56,-195.93"/>
</a>
</g>
<g id="a_edge_3_play_7b27505a_task_e283ac68-label"><a xlink:title="3 [when: pgbouncer_enabled|bool]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#56bd0f" dy="-0.2%"><textPath xlink:href="#path_edge_3_play_7b27505a_task_e283ac68" startOffset="444.64923078660354">3 [when: pgbouncer_enabled|bool]</textPath></text>
</a>
</g>
</g>
<!-- task_ff5f7148 -->
<g id="task_ff5f7148" class="node">
<title>task_ff5f7148</title>
<g id="a_task_ff5f7148"><a xlink:href="/Users/vonng/pigsty/pgsql-createdb.yml" xlink:title="Reload pgbouncer to add database">
<polygon fill="none" stroke="#56bd0f" points="1604.15,-135.85 1604.15,-150.76 1506.11,-161.31 1367.46,-161.31 1269.42,-150.76 1269.42,-135.85 1367.46,-125.31 1506.11,-125.31 1604.15,-135.85"/>
<text text-anchor="middle" x="1436.78" y="-139.61" font-family="Times,serif" font-size="14.00">[task] Reload pgbouncer to add database</text>
</a>
</g>
</g>
<!-- play_7b27505a&#45;&gt;task_ff5f7148 -->
<g id="edge_4_play_7b27505a_task_ff5f7148" class="edge">
<title>play_7b27505a-&gt;task_ff5f7148</title>
<g id="a_edge_4_play_7b27505a_task_ff5f7148"><a xlink:title="4 [when: pg_database_definition.pgbouncer is not defined or pg_database_definition.pgbouncer|bool]">
<path fill="none" stroke="#56bd0f" d="M645.78,-156.64C651.8,-156.14 657.76,-155.69 663.59,-155.31 867.5,-142.08 1102.3,-140.35 1258.94,-141.12" id="path_edge_4_play_7b27505a_task_ff5f7148"/>
<polygon fill="#56bd0f" stroke="#56bd0f" points="1259.13,-144.62 1269.15,-141.17 1259.17,-137.62 1259.13,-144.62"/>
</a>
</g>
<g id="a_edge_4_play_7b27505a_task_ff5f7148-label"><a xlink:title="4 [when: pg_database_definition.pgbouncer is not defined or pg_database_definition.pgbouncer|bool]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#56bd0f" dy="-0.2%"><textPath xlink:href="#path_edge_4_play_7b27505a_task_ff5f7148" startOffset="368.25290375051816">4 [when: pg_database_definition.pgbouncer is not defined or pg_database_definition.pgbouncer|bool]</textPath></text>
</a>
</g>
</g>
<!-- task_877c73c7 -->
<g id="task_877c73c7" class="node">
<title>task_877c73c7</title>
<g id="a_task_877c73c7"><a xlink:href="/Users/vonng/pigsty/pgsql-createdb.yml" xlink:title="Render datasource definition on meta node">
<polygon fill="none" stroke="#56bd0f" points="1638.18,-81.85 1638.18,-96.76 1520.21,-107.31 1353.36,-107.31 1235.39,-96.76 1235.39,-81.85 1353.36,-71.31 1520.21,-71.31 1638.18,-81.85"/>
<text text-anchor="middle" x="1436.78" y="-85.61" font-family="Times,serif" font-size="14.00">[task] Render datasource definition on meta node</text>
</a>
</g>
</g>
<!-- play_7b27505a&#45;&gt;task_877c73c7 -->
<g id="edge_5_play_7b27505a_task_877c73c7" class="edge">
<title>play_7b27505a-&gt;task_877c73c7</title>
<g id="a_edge_5_play_7b27505a_task_877c73c7"><a xlink:title="5 [when: register_datasource|bool]">
<path fill="none" stroke="#56bd0f" d="M572.08,-152.2C597.61,-141.42 631.88,-128.64 663.59,-122.31 853.67,-84.38 1075.11,-78.74 1231.99,-81.04" id="path_edge_5_play_7b27505a_task_877c73c7"/>
<polygon fill="#56bd0f" stroke="#56bd0f" points="1232.17,-84.54 1242.23,-81.2 1232.29,-77.54 1232.17,-84.54"/>
</a>
</g>
<g id="a_edge_5_play_7b27505a_task_877c73c7-label"><a xlink:title="5 [when: register_datasource|bool]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#56bd0f" dy="-0.2%"><textPath xlink:href="#path_edge_5_play_7b27505a_task_877c73c7" startOffset="473.15843126114794">5 [when: register_datasource|bool]</textPath></text>
</a>
</g>
</g>
<!-- task_19b2101b -->
<g id="task_19b2101b" class="node">
<title>task_19b2101b</title>
<g id="a_task_19b2101b"><a xlink:href="/Users/vonng/pigsty/pgsql-createdb.yml" xlink:title="Load grafana datasource on meta node">
<polygon fill="none" stroke="#56bd0f" points="1621.82,-27.85 1621.82,-42.76 1513.43,-53.31 1360.14,-53.31 1251.75,-42.76 1251.75,-27.85 1360.14,-17.31 1513.43,-17.31 1621.82,-27.85"/>
<text text-anchor="middle" x="1436.78" y="-31.61" font-family="Times,serif" font-size="14.00">[task] Load grafana datasource on meta node</text>
</a>
</g>
</g>
<!-- play_7b27505a&#45;&gt;task_19b2101b -->
<g id="edge_6_play_7b27505a_task_19b2101b" class="edge">
<title>play_7b27505a-&gt;task_19b2101b</title>
<g id="a_edge_6_play_7b27505a_task_19b2101b"><a xlink:title="6 [when: register_datasource|bool]">
<path fill="none" stroke="#56bd0f" d="M547.62,-151.95C569.86,-126.36 614.25,-81 663.59,-62.31 887.68,22.61 1175.05,2.16 1328.26,-17.95" id="path_edge_6_play_7b27505a_task_19b2101b"/>
<polygon fill="#56bd0f" stroke="#56bd0f" points="1328.23,-21.48 1338.61,-19.34 1329.16,-14.54 1328.23,-21.48"/>
</a>
</g>
<g id="a_edge_6_play_7b27505a_task_19b2101b-label"><a xlink:title="6 [when: register_datasource|bool]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#56bd0f" dy="-0.2%"><textPath xlink:href="#path_edge_6_play_7b27505a_task_19b2101b" startOffset="589.4542884330506">6 [when: register_datasource|bool]</textPath></text>
</a>
</g>
</g>
<!-- task_e671304f -->
<g id="task_e671304f" class="node">
<title>task_e671304f</title>
<g id="a_task_e671304f"><a xlink:href="/Users/vonng/pigsty/pgsql-createdb.yml" xlink:title="debug">
<polygon fill="none" stroke="#56bd0f" points="2294,-571.85 2294,-586.76 2273.3,-597.31 2244.01,-597.31 2223.3,-586.76 2223.3,-571.85 2244.01,-561.31 2273.3,-561.31 2294,-571.85"/>
<text text-anchor="middle" x="2258.65" y="-575.61" font-family="Times,serif" font-size="14.00">debug</text>
</a>
</g>
</g>
<!-- block_850a3539&#45;&gt;task_e671304f -->
<g id="edge_4_block_850a3539_task_e671304f" class="edge">
<title>block_850a3539-&gt;task_e671304f</title>
<g id="a_edge_4_block_850a3539_task_e671304f"><a xlink:title="4 ">
<path fill="none" stroke="#56bd0f" d="M1490.66,-628.28C1534.83,-624.17 1599.48,-618.41 1655.98,-614.31 1864.37,-599.18 2113.74,-586.36 2213.37,-581.45" id="path_edge_4_block_850a3539_task_e671304f"/>
<polygon fill="#56bd0f" stroke="#56bd0f" points="2213.56,-584.94 2223.37,-580.96 2213.21,-577.95 2213.56,-584.94"/>
</a>
</g>
<g id="a_edge_4_block_850a3539_task_e671304f-label"><a xlink:title="4 ">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#56bd0f" dy="-0.2%"><textPath xlink:href="#path_edge_4_block_850a3539_task_e671304f" startOffset="548.4534081871958">4 </textPath></text>
</a>
</g>
</g>
<!-- task_54aabcf6 -->
<g id="task_54aabcf6" class="node">
<title>task_54aabcf6</title>
<g id="a_task_54aabcf6"><a xlink:href="/Users/vonng/pigsty/pgsql-createdb.yml" xlink:title="Check database definition">
<polygon fill="none" stroke="#56bd0f" points="2369.96,-625.85 2369.96,-640.76 2304.76,-651.31 2212.55,-651.31 2147.35,-640.76 2147.35,-625.85 2212.55,-615.31 2304.76,-615.31 2369.96,-625.85"/>
<text text-anchor="middle" x="2258.65" y="-629.61" font-family="Times,serif" font-size="14.00">Check database definition</text>
</a>
</g>
</g>
<!-- block_850a3539&#45;&gt;task_54aabcf6 -->
<g id="edge_3_block_850a3539_task_54aabcf6" class="edge">
<title>block_850a3539-&gt;task_54aabcf6</title>
<g id="a_edge_3_block_850a3539_task_54aabcf6"><a xlink:title="3 ">
<path fill="none" stroke="#56bd0f" d="M1490.32,-633.31C1619.61,-633.31 1955.89,-633.31 2137.36,-633.31" id="path_edge_3_block_850a3539_task_54aabcf6"/>
<polygon fill="#56bd0f" stroke="#56bd0f" points="2137.48,-636.81 2147.48,-633.31 2137.48,-629.81 2137.48,-636.81"/>
</a>
</g>
<g id="a_edge_3_block_850a3539_task_54aabcf6-label"><a xlink:title="3 ">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#56bd0f" dy="-0.2%"><textPath xlink:href="#path_edge_3_block_850a3539_task_54aabcf6" startOffset="489.7504000000001">3 </textPath></text>
</a>
</g>
</g>
<!-- task_8ca91d26 -->
<g id="task_8ca91d26" class="node">
<title>task_8ca91d26</title>
<g id="a_task_8ca91d26"><a xlink:href="/Users/vonng/pigsty/pgsql-createdb.yml" xlink:title="Fetch database definition">
<polygon fill="none" stroke="#56bd0f" points="2366.42,-679.85 2366.42,-694.76 2303.29,-705.31 2214.01,-705.31 2150.88,-694.76 2150.88,-679.85 2214.01,-669.31 2303.29,-669.31 2366.42,-679.85"/>
<text text-anchor="middle" x="2258.65" y="-683.61" font-family="Times,serif" font-size="14.00">Fetch database definition</text>
</a>
</g>
</g>
<!-- block_850a3539&#45;&gt;task_8ca91d26 -->
<g id="edge_2_block_850a3539_task_8ca91d26" class="edge">
<title>block_850a3539-&gt;task_8ca91d26</title>
<g id="a_edge_2_block_850a3539_task_8ca91d26"><a xlink:title="2 ">
<path fill="none" stroke="#56bd0f" d="M1490.66,-638.34C1534.83,-642.44 1599.48,-648.21 1655.98,-652.31 1824.35,-664.53 2019.48,-675.25 2140.76,-681.51" id="path_edge_2_block_850a3539_task_8ca91d26"/>
<polygon fill="#56bd0f" stroke="#56bd0f" points="2140.64,-685 2150.81,-682.02 2141,-678.01 2140.64,-685"/>
</a>
</g>
<g id="a_edge_2_block_850a3539_task_8ca91d26-label"><a xlink:title="2 ">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#56bd0f" dy="-0.2%"><textPath xlink:href="#path_edge_2_block_850a3539_task_8ca91d26" startOffset="493.19969517572133">2 </textPath></text>
</a>
</g>
</g>
<!-- task_f3853b1e -->
<g id="task_f3853b1e" class="node">
<title>task_f3853b1e</title>
<g id="a_task_f3853b1e"><a xlink:href="/Users/vonng/pigsty/pgsql-createdb.yml" xlink:title="Validate pg_database">
<polygon fill="none" stroke="#56bd0f" points="2350.97,-733.85 2350.97,-748.76 2296.89,-759.31 2220.42,-759.31 2166.34,-748.76 2166.34,-733.85 2220.42,-723.31 2296.89,-723.31 2350.97,-733.85"/>
<text text-anchor="middle" x="2258.65" y="-737.61" font-family="Times,serif" font-size="14.00">Validate pg_database</text>
</a>
</g>
</g>
<!-- block_850a3539&#45;&gt;task_f3853b1e -->
<g id="edge_1_block_850a3539_task_f3853b1e" class="edge">
<title>block_850a3539-&gt;task_f3853b1e</title>
<g id="a_edge_1_block_850a3539_task_f3853b1e"><a xlink:title="1 ">
<path fill="none" stroke="#56bd0f" d="M1490.53,-650.49C1534.35,-664.05 1598.58,-682.3 1655.98,-692.31 1830.04,-722.66 2035.78,-734.29 2155.99,-738.69" id="path_edge_1_block_850a3539_task_f3853b1e"/>
<polygon fill="#56bd0f" stroke="#56bd0f" points="2156.16,-742.2 2166.28,-739.06 2156.41,-735.2 2156.16,-742.2"/>
</a>
</g>
<g id="a_edge_1_block_850a3539_task_f3853b1e-label"><a xlink:title="1 ">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#56bd0f" dy="-0.2%"><textPath xlink:href="#path_edge_1_block_850a3539_task_f3853b1e" startOffset="509.6870604849466">1 </textPath></text>
</a>
</g>
</g>
<!-- task_f2f48c16 -->
<g id="task_f2f48c16" class="node">
<title>task_f2f48c16</title>
<g id="a_task_f2f48c16"><a xlink:href="/Users/vonng/pigsty/roles/postgres/tasks/createdb.yml" xlink:title="Execute database {{ database.name }} baseline sql">
<polygon fill="none" stroke="#56bd0f" points="2467.12,-241.85 2467.12,-256.76 2345,-267.31 2172.3,-267.31 2050.19,-256.76 2050.19,-241.85 2172.3,-231.31 2345,-231.31 2467.12,-241.85"/>
<text text-anchor="middle" x="2258.65" y="-245.61" font-family="Times,serif" font-size="14.00">Execute database {{ database.name }} baseline sql</text>
</a>
</g>
</g>
<!-- block_020061f5&#45;&gt;task_f2f48c16 -->
<g id="edge_6_block_020061f5_task_f2f48c16" class="edge">
<title>block_020061f5-&gt;task_f2f48c16</title>
<g id="a_edge_6_block_020061f5_task_f2f48c16"><a xlink:title="6 [when: pg_role == 'primary' and database.baseline is defined]">
<path fill="none" stroke="#56bd0f" d="M1492.28,-339.24C1536.03,-325.48 1599.3,-307.27 1655.98,-297.31 1782.21,-275.12 1925.17,-263.18 2040.05,-256.76" id="path_edge_6_block_020061f5_task_f2f48c16"/>
<polygon fill="#56bd0f" stroke="#56bd0f" points="2040.58,-260.23 2050.37,-256.19 2040.19,-253.24 2040.58,-260.23"/>
</a>
</g>
<g id="a_edge_6_block_020061f5_task_f2f48c16-label"><a xlink:title="6 [when: pg_role == 'primary' and database.baseline is defined]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#56bd0f" dy="-0.2%"><textPath xlink:href="#path_edge_6_block_020061f5_task_f2f48c16" startOffset="359.19090548963993">6 [when: pg_role == 'primary' and database.baseline is defined]</textPath></text>
</a>
</g>
</g>
<!-- task_fd73085d -->
<g id="task_fd73085d" class="node">
<title>task_fd73085d</title>
<g id="a_task_fd73085d"><a xlink:href="/Users/vonng/pigsty/roles/postgres/tasks/createdb.yml" xlink:title="Execute database {{ database.name }} creation sql">
<polygon fill="none" stroke="#56bd0f" points="2467.12,-295.85 2467.12,-310.76 2345,-321.31 2172.3,-321.31 2050.19,-310.76 2050.19,-295.85 2172.3,-285.31 2345,-285.31 2467.12,-295.85"/>
<text text-anchor="middle" x="2258.65" y="-299.61" font-family="Times,serif" font-size="14.00">Execute database {{ database.name }} creation sql</text>
</a>
</g>
</g>
<!-- block_020061f5&#45;&gt;task_fd73085d -->
<g id="edge_5_block_020061f5_task_fd73085d" class="edge">
<title>block_020061f5-&gt;task_fd73085d</title>
<g id="a_edge_5_block_020061f5_task_fd73085d"><a xlink:title="5 [when: pg_role == 'primary']">
<path fill="none" stroke="#56bd0f" d="M1561.49,-345.91C1592.34,-343.24 1625.36,-340.53 1655.98,-338.31 1791.48,-328.47 1944.31,-319.61 2062.03,-313.26" id="path_edge_5_block_020061f5_task_fd73085d"/>
<polygon fill="#56bd0f" stroke="#56bd0f" points="2062.44,-316.75 2072.23,-312.71 2062.06,-309.76 2062.44,-316.75"/>
</a>
</g>
<g id="a_edge_5_block_020061f5_task_fd73085d-label"><a xlink:title="5 [when: pg_role == 'primary']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#56bd0f" dy="-0.2%"><textPath xlink:href="#path_edge_5_block_020061f5_task_fd73085d" startOffset="351.2337655139915">5 [when: pg_role == 'primary']</textPath></text>
</a>
</g>
</g>
<!-- task_68433023 -->
<g id="task_68433023" class="node">
<title>task_68433023</title>
<g id="a_task_68433023"><a xlink:href="/Users/vonng/pigsty/roles/postgres/tasks/createdb.yml" xlink:title="Execute database {{ database.name }} creation command">
<polygon fill="none" stroke="#56bd0f" points="2494.49,-349.85 2494.49,-364.76 2356.34,-375.31 2160.97,-375.31 2022.81,-364.76 2022.81,-349.85 2160.97,-339.31 2356.34,-339.31 2494.49,-349.85"/>
<text text-anchor="middle" x="2258.65" y="-353.61" font-family="Times,serif" font-size="14.00">Execute database {{ database.name }} creation command</text>
</a>
</g>
</g>
<!-- block_020061f5&#45;&gt;task_68433023 -->
<g id="edge_4_block_020061f5_task_68433023" class="edge">
<title>block_020061f5-&gt;task_68433023</title>
<g id="a_edge_4_block_020061f5_task_68433023"><a xlink:title="4 [when: pg_role == 'primary']">
<path fill="none" stroke="#56bd0f" d="M1561.42,-357.31C1680.47,-357.31 1863.87,-357.31 2012.56,-357.31" id="path_edge_4_block_020061f5_task_68433023"/>
<polygon fill="#56bd0f" stroke="#56bd0f" points="2012.75,-360.81 2022.75,-357.31 2012.75,-353.81 2012.75,-360.81"/>
</a>
</g>
<g id="a_edge_4_block_020061f5_task_68433023-label"><a xlink:title="4 [when: pg_role == 'primary']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#56bd0f" dy="-0.2%"><textPath xlink:href="#path_edge_4_block_020061f5_task_68433023" startOffset="312.8663999999999">4 [when: pg_role == 'primary']</textPath></text>
</a>
</g>
</g>
<!-- task_d7e1d4d6 -->
<g id="task_d7e1d4d6" class="node">
<title>task_d7e1d4d6</title>
<g id="a_task_d7e1d4d6"><a xlink:href="/Users/vonng/pigsty/roles/postgres/tasks/createdb.yml" xlink:title="Render database {{ database.name }} baseline sql">
<polygon fill="none" stroke="#56bd0f" points="2463.99,-403.85 2463.99,-418.76 2343.71,-429.31 2173.6,-429.31 2053.31,-418.76 2053.31,-403.85 2173.6,-393.31 2343.71,-393.31 2463.99,-403.85"/>
<text text-anchor="middle" x="2258.65" y="-407.61" font-family="Times,serif" font-size="14.00">Render database {{ database.name }} baseline sql</text>
</a>
</g>
</g>
<!-- block_020061f5&#45;&gt;task_d7e1d4d6 -->
<g id="edge_3_block_020061f5_task_d7e1d4d6" class="edge">
<title>block_020061f5-&gt;task_d7e1d4d6</title>
<g id="a_edge_3_block_020061f5_task_d7e1d4d6"><a xlink:title="3 [when: pg_role == 'primary' and database.baseline is defined]">
<path fill="none" stroke="#56bd0f" d="M1561.49,-368.7C1592.34,-371.37 1625.36,-374.08 1655.98,-376.31 1792.24,-386.2 1946.03,-395.11 2064.01,-401.46" id="path_edge_3_block_020061f5_task_d7e1d4d6"/>
<polygon fill="#56bd0f" stroke="#56bd0f" points="2064.06,-404.97 2074.23,-402.01 2064.43,-397.98 2064.06,-404.97"/>
</a>
</g>
<g id="a_edge_3_block_020061f5_task_d7e1d4d6-label"><a xlink:title="3 [when: pg_role == 'primary' and database.baseline is defined]">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#56bd0f" dy="-0.2%"><textPath xlink:href="#path_edge_3_block_020061f5_task_d7e1d4d6" startOffset="319.7410229441773">3 [when: pg_role == 'primary' and database.baseline is defined]</textPath></text>
</a>
</g>
</g>
<!-- task_d342d66d -->
<g id="task_d342d66d" class="node">
<title>task_d342d66d</title>
<g id="a_task_d342d66d"><a xlink:href="/Users/vonng/pigsty/roles/postgres/tasks/createdb.yml" xlink:title="Render database {{ database.name }} creation sql">
<polygon fill="none" stroke="#56bd0f" points="2463.59,-457.85 2463.59,-472.76 2343.54,-483.31 2173.77,-483.31 2053.72,-472.76 2053.72,-457.85 2173.77,-447.31 2343.54,-447.31 2463.59,-457.85"/>
<text text-anchor="middle" x="2258.65" y="-461.61" font-family="Times,serif" font-size="14.00">Render database {{ database.name }} creation sql</text>
</a>
</g>
</g>
<!-- block_020061f5&#45;&gt;task_d342d66d -->
<g id="edge_2_block_020061f5_task_d342d66d" class="edge">
<title>block_020061f5-&gt;task_d342d66d</title>
<g id="a_edge_2_block_020061f5_task_d342d66d"><a xlink:title="2 [when: pg_role == 'primary']">
<path fill="none" stroke="#56bd0f" d="M1493.21,-375.31C1536.94,-388.78 1599.74,-406.5 1655.98,-416.31 1783.64,-438.57 1928.34,-450.76 2043.84,-457.41" id="path_edge_2_block_020061f5_task_d342d66d"/>
<polygon fill="#56bd0f" stroke="#56bd0f" points="2043.68,-460.91 2053.87,-457.98 2044.08,-453.92 2043.68,-460.91"/>
</a>
</g>
<g id="a_edge_2_block_020061f5_task_d342d66d-label"><a xlink:title="2 [when: pg_role == 'primary']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#56bd0f" dy="-0.2%"><textPath xlink:href="#path_edge_2_block_020061f5_task_d342d66d" startOffset="394.2268867532863">2 [when: pg_role == 'primary']</textPath></text>
</a>
</g>
</g>
<!-- task_9896d340 -->
<g id="task_9896d340" class="node">
<title>task_9896d340</title>
<g id="a_task_9896d340"><a xlink:href="/Users/vonng/pigsty/roles/postgres/tasks/createdb.yml" xlink:title="debug">
<polygon fill="none" stroke="#56bd0f" points="2294,-511.85 2294,-526.76 2273.3,-537.31 2244.01,-537.31 2223.3,-526.76 2223.3,-511.85 2244.01,-501.31 2273.3,-501.31 2294,-511.85"/>
<text text-anchor="middle" x="2258.65" y="-515.61" font-family="Times,serif" font-size="14.00">debug</text>
</a>
</g>
</g>
<!-- block_020061f5&#45;&gt;task_9896d340 -->
<g id="edge_1_block_020061f5_task_9896d340" class="edge">
<title>block_020061f5-&gt;task_9896d340</title>
<g id="a_edge_1_block_020061f5_task_9896d340"><a xlink:title="1 [when: pg_role == 'primary']">
<path fill="none" stroke="#56bd0f" d="M1463.14,-375.33C1502.35,-402.1 1581,-451.54 1655.98,-473.31 1857.37,-531.76 2111.67,-526.93 2213.02,-522.04" id="path_edge_1_block_020061f5_task_9896d340"/>
<polygon fill="#56bd0f" stroke="#56bd0f" points="2213.38,-525.53 2223.19,-521.52 2213.03,-518.53 2213.38,-525.53"/>
</a>
</g>
<g id="a_edge_1_block_020061f5_task_9896d340-label"><a xlink:title="1 [when: pg_role == 'primary']">
<text text-anchor="middle" font-family="Times,serif" font-size="14.00" fill="#56bd0f" dy="-0.2%"><textPath xlink:href="#path_edge_1_block_020061f5_task_9896d340" startOffset="561.7217906280545">1 [when: pg_role == 'primary']</textPath></text>
</a>
</g>
</g>
</g>
</svg>